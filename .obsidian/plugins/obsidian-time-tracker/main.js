/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
https://github.com/daaru00/obsidian-time-tracker/
*/

'use strict';

var os = require('os');
var obsidian = require('obsidian');

function _interopNamespace(e) {
    if (e && e.__esModule) return e;
    var n = Object.create(null);
    if (e) {
        Object.keys(e).forEach(function (k) {
            if (k !== 'default') {
                var d = Object.getOwnPropertyDescriptor(e, k);
                Object.defineProperty(n, k, d.get ? d : {
                    enumerable: true,
                    get: function () { return e[k]; }
                });
            }
        });
    }
    n["default"] = e;
    return Object.freeze(n);
}

var os__namespace = /*#__PURE__*/_interopNamespace(os);

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

obsidian.addIcon('time-tracker-play', `
<g
   id="g4"
   transform="matrix(0.80313764,0,0,0.80313764,-1.3691584e-4,-1.3691584e-4)">
	<path
   style="fill:currentColor;fill-opacity: 0;stroke-width: 8;stroke: currentColor;"
   d="m 113.956,57.006 -97.4,-56.2 c -4,-2.3 -9,0.6 -9,5.2 v 112.5 c 0,4.6 5,7.5 9,5.2 l 97.4,-56.2 c 4,-2.401 4,-8.2 0,-10.5 z"
   id="path2"/>
</g>
`);
obsidian.addIcon('time-tracker-pause', `
<g
   id="g6"
   transform="scale(0.36057086)">
	<path
   style="fill:currentColor;fill-opacity: 0;stroke-width: 14;stroke: currentColor;"
   d="m 14.22,45.665 v 186.013 c 0,25.223 16.711,45.66 37.327,45.66 20.618,0 37.339,-20.438 37.339,-45.66 V 45.665 C 88.886,20.454 72.165,0.008 51.547,0.008 30.931,0 14.22,20.454 14.22,45.665 Z"
   id="path2"/>
	<path
   style="fill:currentColor;fill-opacity: 0;stroke-width: 14;stroke: currentColor;"
   d="M 225.78,0 C 205.166,0 188.455,20.446 188.455,45.657 V 231.67 c 0,25.223 16.711,45.652 37.325,45.652 20.614,0 37.338,-20.43 37.338,-45.652 V 45.665 C 263.109,20.454 246.394,0 225.78,0 Z"
   id="path4"/>
</g>
`);
obsidian.addIcon('time-tracker-resume', `
<g
   id="g14"
   transform="matrix(2.1750952,0,0,2.1750952,0.00108664,-9.1e-7)">
	<g
   id="g12">
		<g
   id="g4">
			<path
       style="fill:currentColor;fill-opacity: 0;stroke-width: 3;stroke: currentColor;"
   d="m 9.629,44.68 c -1.154,1.16 -2.895,1.51 -4.407,0.885 -1.513,-0.623 -2.5,-2.1 -2.5,-3.735 V 4.043 c 0,-1.637 0.987,-3.112 2.5,-3.736 1.513,-0.625 3.253,-0.275 4.407,0.885 l 17.862,17.951 c 2.088,2.098 2.088,5.488 0,7.585 z"
   id="path2"/>
		</g>
		<g
   id="g10">
			<g
   id="g8">
				<path
         style="fill:currentColor;fill-opacity: 0;stroke-width: 3;stroke: currentColor;"
   d="m 38.252,45.975 c -2.763,0 -5,-2.238 -5,-5 V 5 c 0,-2.762 2.237,-5 5,-5 2.762,0 5,2.238 5,5 v 35.975 c 0,2.761 -2.239,5 -5,5 z"
   id="path6"/>
			</g>
		</g>
	</g>
</g>
`);
obsidian.addIcon('time-tracker-stop', `
<rect style="fill:none;fill-opacity:1;stroke:currentColor;stroke-width:5.0125947;stroke-linecap:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" id="rect825" width="89.674904" height="88.737404" x="5.1625481" y="5.6312981">
</rect>
`);

const DEFAULT_SETTINGS = {
    approximation: 0,
    pomodoroDuration: 5 * 60,
    storageFile: 'TimeTracker',
    enableStatusBar: true,
};

class TimeTrackerIssueSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        return __awaiter(this, void 0, void 0, function* () {
            const { containerEl } = this;
            containerEl.empty();
            new obsidian.Setting(containerEl)
                .setName('Timer approximation')
                .setDesc('Round spent time')
                .addDropdown(dropdown => dropdown
                .addOptions({
                '0': 'disabled',
                '60': '1 minute',
                '300': '5 minutes',
                '600': '10 minutes',
                '900': '15 minutes'
            })
                .setValue(this.plugin.settings.approximation.toString())
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.approximation = parseInt(value);
                yield this.plugin.saveSettings();
            })));
            new obsidian.Setting(containerEl)
                .setName('Pomodoro duration')
                .setDesc('The duration of pomodoro timer')
                .addDropdown(dropdown => dropdown
                .addOptions({
                '300': '5 minutes',
                '900': '15 minutes',
                '1500': '25 minutes',
                '1800': '30 minutes',
            })
                .setValue(this.plugin.settings.pomodoroDuration.toString())
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.pomodoroDuration = parseInt(value);
                yield this.plugin.saveSettings();
            })));
            new obsidian.Setting(containerEl)
                .setName('Storage file')
                .setDesc('The path of file used to store saved timers')
                .addText(text => text
                .setValue(this.plugin.settings.storageFile)
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.storageFile = value;
                yield this.plugin.saveSettings();
            })));
            new obsidian.Setting(containerEl)
                .setName('Status bar item')
                .setDesc('Enable the status bar item for current running timer')
                .addToggle(toggle => toggle
                .setValue(this.plugin.settings.enableStatusBar)
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.enableStatusBar = value;
                yield this.plugin.saveSettings();
            })));
        });
    }
}

function getTimestamp(date) {
    date = date || new Date();
    return Math.trunc(date.getTime() / 1000);
}
class Timer {
    constructor(timerManager, id) {
        this.timerManager = timerManager;
        this.id = id;
        this.startedAt = null;
        this.pausedAt = null;
        this.resumedAt = null;
        this.durationAcc = 0;
        this.tags = [];
    }
    start() {
        this.timerManager.pauseAll();
        if (this.startedAt !== null) {
            return this.resume();
        }
        this.startedAt = new Date();
        this.isRunning = true;
        this.timerManager.emit('timer-start', { timer: this });
    }
    reset() {
        this.startedAt = null;
        this.pausedAt = null;
        this.resumedAt = null;
        this.durationAcc = 0;
        this.timerManager.emit('timer-reset', { timer: this });
    }
    restart() {
        this.reset();
        this.start();
    }
    pause() {
        if (!this.isRunning) {
            return;
        }
        // timer was already paused at least once
        if (this.pausedAt !== null) {
            this.updateDurationAccumulator();
        }
        this.pausedAt = new Date();
        this.isRunning = false;
        this.timerManager.emit('timer-paused', { timer: this });
    }
    save() {
        this.pause();
        this.timerManager.emit('timer-saved', { timer: this });
    }
    resume() {
        this.timerManager.pauseAll();
        if (this.isRunning) {
            return;
        }
        // timer was already resumed at least once
        if (this.resumedAt !== null) {
            this.updateDurationAccumulator();
        }
        this.resumedAt = new Date();
        this.isRunning = true;
        this.timerManager.emit('timer-resumed', { timer: this });
    }
    updateDurationAccumulator() {
        this.durationAcc = this.getDuration();
    }
    getFormattedDurationObject(seconds) {
        const parts = this.getFormattedDurationString(seconds).split(':');
        return {
            hours: parseInt(parts[0]),
            minutes: parseInt(parts[1]),
            seconds: parseInt(parts[2])
        };
    }
    getFormattedDurationString(seconds) {
        seconds = seconds || this.getDuration();
        return (new Date(seconds * 1000)).toISOString().substr(11, 8);
    }
    forceDuration(seconds) {
        if (this.isRunning) {
            this.pause();
        }
        this.durationAcc = seconds;
        this.resumedAt = this.pausedAt;
    }
    getApproximatedDuration(seconds) {
        let duration = this.getDuration();
        if (seconds === 0) {
            return duration;
        }
        const approximationEdge = seconds / 2;
        const leftHours = duration % seconds;
        if (leftHours < approximationEdge) {
            duration = duration - leftHours;
        }
        else {
            duration = duration - leftHours + seconds;
        }
        if (duration <= 0) {
            duration = seconds;
        }
        return Math.ceil(duration);
    }
    getDuration() {
        const now = getTimestamp();
        // timer started
        if (this.startedAt !== null &&
            this.isRunning &&
            this.pausedAt === null &&
            this.resumedAt === null) {
            return now - getTimestamp(this.startedAt);
        }
        // timer paused
        if (this.startedAt !== null &&
            !this.isRunning &&
            this.pausedAt !== null &&
            this.resumedAt === null) {
            return getTimestamp(this.pausedAt) - getTimestamp(this.startedAt);
        }
        // timer resumed
        if (this.startedAt !== null &&
            this.isRunning &&
            this.pausedAt !== null &&
            this.resumedAt !== null &&
            this.durationAcc === 0) {
            return (getTimestamp(this.pausedAt) - getTimestamp(this.startedAt)) + (now - getTimestamp(this.resumedAt));
        }
        // timer paused at least once
        if (this.startedAt !== null &&
            !this.isRunning &&
            this.pausedAt !== null &&
            this.resumedAt !== null &&
            this.durationAcc > 0) {
            return this.durationAcc;
        }
        // timer resumed at least once
        if (this.startedAt !== null &&
            this.isRunning &&
            this.pausedAt !== null &&
            this.resumedAt !== null &&
            this.durationAcc > 0) {
            return this.durationAcc + (now - getTimestamp(this.resumedAt));
        }
        return 0;
    }
    setDuration(seconds) {
        const now = new Date();
        this.startedAt = now;
        this.pausedAt = now;
        this.resumedAt = now;
        this.durationAcc = seconds;
        if (this.isRunning) {
            this.resumedAt = new Date();
        }
        this.timerManager.emit('timer-edited', { timer: this });
    }
    addTag(tag) {
        this.tags.push(tag);
    }
    hasTag(tag) {
        return this.tags.indexOf(tag) !== -1;
    }
    removeTag(tag) {
        const index = this.tags.indexOf(tag);
        if (index === -1) {
            return;
        }
        this.tags.splice(index, 1);
    }
}
class TimerManager {
    constructor() {
        this.timers = [];
        this.subscriptions = new Map();
    }
    getAll() {
        return this.timers;
    }
    getRunningTimer() {
        return this.timers.find(timer => timer.isRunning);
    }
    getById(id) {
        return this.timers.find(timer => timer.id === id);
    }
    createNew(id) {
        if (this.getById(id) !== undefined) {
            throw 'Duplicated Timer Identifier';
        }
        const timer = new Timer(this, id);
        this.timers.push(timer);
        return timer;
    }
    pauseAll() {
        for (const timer of this.timers) {
            timer.pause();
        }
    }
    deleteById(id) {
        const index = this.timers.findIndex(timer => timer.id === id);
        if (index === -1) {
            throw 'Timer Identifier Not Found';
        }
        this.timers.splice(index, 1);
        this.emit('timer-deleted', { timer: { id } });
    }
    deleteAll() {
        const ids = this.timers.map(timer => timer.id);
        this.timers = [];
        for (const id of ids) {
            this.emit('timer-deleted', { timer: { id } });
        }
    }
    createNewPomodoro(id, seconds) {
        const timer = new Timer(this, id);
        timer.addTag('pomodoro');
        timer.setDuration(seconds);
        return timer;
    }
    on(event, callback) {
        if (!this.subscriptions.has(event)) {
            this.subscriptions.set(event, [callback]);
            return;
        }
        const subscriptions = this.subscriptions.get(event);
        subscriptions.push(callback);
        this.subscriptions.set(event, subscriptions);
    }
    emit(event, data = {}) {
        if (!this.subscriptions.has(event)) {
            return;
        }
        const subscriptions = this.subscriptions.get(event);
        for (const subscription of subscriptions) {
            subscription(data);
        }
    }
    dump() {
        return this.timers.map(timer => ({
            id: timer.id,
            durationAcc: timer.durationAcc,
            startedAt: timer.startedAt,
            resumedAt: timer.resumedAt,
            pausedAt: timer.pausedAt,
            isRunning: timer.isRunning,
            tags: timer.tags,
        }));
    }
    restore(timers) {
        const imported = [];
        for (const timer of timers) {
            const newTimer = new Timer(this, timer.id);
            for (const key in timer) {
                // eslint-disable-next-line @typescript-eslint/no-explicit-any
                const value = timer[key];
                switch (key) {
                    case 'durationAcc':
                        newTimer.durationAcc = parseInt(value);
                        break;
                    case 'startedAt':
                        newTimer.startedAt = new Date(value);
                        break;
                    case 'resumedAt':
                        newTimer.resumedAt = new Date(value);
                        break;
                    case 'pausedAt':
                        newTimer.pausedAt = new Date(value);
                        break;
                    case 'isRunning':
                        newTimer.isRunning = value;
                        break;
                    case 'tags':
                        newTimer.tags = value;
                        break;
                }
            }
            imported.push(newTimer);
        }
        if (imported.length === 0) {
            return;
        }
        this.timers = imported;
    }
}

class TimerEditModal extends obsidian.Modal {
    constructor(plugin, timer) {
        super(plugin.app);
        this.plugin = plugin;
        this.timer = timer;
    }
    onOpen() {
        this.contentEl.empty();
        this.contentEl.createEl('h2', {
            text: `Edit timer ${this.timer.id} duration`,
            cls: ['time-tracker-modal-title']
        });
        const duration = this.timer.getFormattedDurationObject();
        const form = this.contentEl.createEl('form');
        form.onsubmit = this.onTimerEdit.bind(this);
        form.addClass('time-tracker-edit');
        this.hoursInput = new obsidian.TextComponent(form);
        this.hoursInput.setValue(duration.hours.toString());
        this.hoursInput.inputEl.type = 'number';
        this.hoursInput.inputEl.setAttribute('min', '0');
        this.hoursInput.inputEl.setAttribute('max', '24');
        this.hoursInput.inputEl.focus();
        form.createSpan({
            text: ':'
        });
        this.minutesInput = new obsidian.TextComponent(form);
        this.minutesInput.setValue(duration.minutes.toString());
        this.minutesInput.inputEl.type = 'number';
        this.minutesInput.inputEl.setAttribute('min', '0');
        this.minutesInput.inputEl.setAttribute('max', '59');
        form.createSpan({
            text: ':'
        });
        this.secondsInput = new obsidian.TextComponent(form);
        this.secondsInput.setValue(duration.seconds.toString());
        this.secondsInput.inputEl.type = 'number';
        this.secondsInput.inputEl.setAttribute('min', '0');
        this.secondsInput.inputEl.setAttribute('max', '59');
        const commandContainer = form.createDiv({ cls: ['time-tracker-modal-commands'] });
        new obsidian.ButtonComponent(commandContainer)
            .setButtonText('edit');
    }
    onTimerEdit(event) {
        event.stopPropagation();
        const hours = parseInt(this.hoursInput.getValue().trim() || '0');
        const minutes = parseInt(this.minutesInput.getValue().trim() || '0');
        const seconds = parseInt(this.secondsInput.getValue().trim() || '0');
        this.timer.setDuration(seconds + (minutes * 60) + (hours * 60 * 60));
        this.close();
    }
}

const VIEW_TYPE_OUTPUT = 'time-tracker';
class TimerView extends obsidian.ItemView {
    constructor(leaf, plugin) {
        super(leaf);
        this.plugin = plugin;
    }
    getViewType() {
        return VIEW_TYPE_OUTPUT;
    }
    getDisplayText() {
        return 'Time Tracker';
    }
    getIcon() {
        return 'clock';
    }
    onOpen() {
        return __awaiter(this, void 0, void 0, function* () {
            const { containerEl } = this;
            containerEl.empty();
            const table = containerEl.createEl('table');
            table.addClass('time-tracker-table');
            this.timerTable = table.createTBody();
            this.refreshTimerList();
            this.registerInterval(window.setInterval(this.refreshTimerList.bind(this), 1000));
        });
    }
    refreshTimerList() {
        this.timerTable.empty();
        const timers = this.plugin.timeManager.getAll();
        if (timers.length === 0) {
            const row = this.timerTable.createEl('tr');
            row.createEl('td', {
                text: 'no active timers',
                attr: {
                    'col-span': '3'
                },
                cls: ['time-tracker-table-no-timers']
            });
            return;
        }
        for (const timer of timers) {
            const row = this.timerTable.createEl('tr');
            row.createEl('td', {
                text: timer.id,
                cls: ['time-tracker-table-id']
            });
            row.createEl('td', {
                text: timer.getFormattedDurationString(),
                cls: ['time-tracker-table-time']
            }).addClass('timer-view');
            const commandContainer = row.createEl('td', {
                cls: ['time-tracker-table-commands']
            });
            if (timer.isRunning) {
                new obsidian.ButtonComponent(commandContainer)
                    .setIcon('time-tracker-pause').setTooltip('Pause Timer')
                    .onClick(() => {
                    timer.pause();
                    this.refreshTimerList();
                });
            }
            else {
                new obsidian.ButtonComponent(commandContainer)
                    .setIcon('time-tracker-resume').setTooltip('Start Timer')
                    .onClick(() => {
                    timer.resume();
                    this.refreshTimerList();
                });
            }
            new obsidian.ButtonComponent(commandContainer)
                .setIcon('pencil').setTooltip('Edit Timer')
                .onClick(() => {
                timer.pause();
                this.refreshTimerList();
                new TimerEditModal(this.plugin, timer).open();
            });
            new obsidian.ButtonComponent(commandContainer)
                .setIcon('time-tracker-stop').setTooltip('Stop Timer')
                .onClick(() => {
                timer.save();
                this.refreshTimerList();
            });
            new obsidian.ButtonComponent(commandContainer)
                .setIcon('trash').setTooltip('Delete Timer')
                .onClick(() => {
                this.plugin.timeManager.deleteById(timer.id);
                this.refreshTimerList();
            });
        }
    }
}

class TimerWidget {
    constructor(plugin, el) {
        this.plugin = plugin;
        this.el = el;
        this.plugin.timeManager.on('timer-start', this.refreshTimerControl.bind(this));
        this.plugin.timeManager.on('timer-paused', this.refreshTimerControl.bind(this));
        this.plugin.timeManager.on('timer-resumed', this.refreshTimerControl.bind(this));
        this.plugin.timeManager.on('timer-reset', this.refreshTimerControl.bind(this));
        this.plugin.timeManager.on('timer-deleted', this.refreshTimerControl.bind(this));
        this.plugin.timeManager.on('timer-edited', this.refreshTimerControl.bind(this));
        this.el.addEventListener('tick', this.refreshTimerView.bind(this));
    }
    setType(name) {
        this.externalTypeName = name;
        return this;
    }
    setIdentifier(identifier) {
        this.el.dataset.identifier = identifier;
        this.el.empty();
        this.identifier = identifier;
        return this;
    }
    showTimerView() {
        this.timerView = this.el.createSpan({ cls: ['timer-view'] });
        this.refreshTimerView();
        return this;
    }
    refreshTimerView() {
        if (!this.timerView) {
            return;
        }
        const timer = this.plugin.timeManager.getById(this.identifier);
        if (!timer) {
            this.timerView.setText('00:00:00');
            return;
        }
        this.timerView.setText(timer.getFormattedDurationString());
    }
    showTimerControl() {
        this.timerControlContainer = this.el.createDiv({ cls: ['timer-control'] });
        this.refreshTimerControl();
        return this;
    }
    refreshTimerControl() {
        if (!this.timerControlContainer) {
            return;
        }
        this.timerControlContainer.empty();
        const timer = this.plugin.timeManager.getById(this.identifier);
        if (timer) {
            new obsidian.ButtonComponent(this.timerControlContainer)
                .setIcon('trash').setTooltip('Delete Timer')
                .onClick(() => {
                this.plugin.timeManager.deleteById(timer.id);
                this.refreshTimerView();
            });
            new obsidian.ButtonComponent(this.timerControlContainer)
                .setIcon('pencil').setTooltip('Edit Timer')
                .onClick(() => {
                timer.pause();
                this.refreshTimerView();
                new TimerEditModal(this.plugin, timer).open();
            });
            new obsidian.ButtonComponent(this.timerControlContainer)
                .setIcon('time-tracker-stop').setTooltip('Stop Timer')
                .onClick(() => {
                timer.save();
                this.refreshTimerView();
            });
            if (timer.isRunning) {
                new obsidian.ButtonComponent(this.timerControlContainer)
                    .setIcon('time-tracker-pause').setTooltip('Pause Timer')
                    .onClick(() => {
                    timer.pause();
                    this.refreshTimerView();
                });
            }
            else {
                new obsidian.ButtonComponent(this.timerControlContainer)
                    .setIcon('time-tracker-resume').setTooltip('Start Timer')
                    .onClick(() => {
                    timer.resume();
                    this.refreshTimerView();
                });
            }
        }
        else {
            new obsidian.ButtonComponent(this.timerControlContainer)
                .setIcon('time-tracker-play').setTooltip('Start Timer')
                .onClick(() => {
                const timer = this.plugin.timeManager.createNew(this.identifier);
                if (this.externalTypeName) {
                    timer.addTag(this.externalTypeName);
                }
                timer.start();
                this.refreshTimerView();
            });
        }
        new obsidian.ButtonComponent(this.timerControlContainer)
            .setIcon('clock').setTooltip('Store Time')
            .onClick(() => {
            const pomodoro = this.plugin.timeManager.createNewPomodoro(this.identifier, this.plugin.settings.pomodoroDuration);
            if (this.externalTypeName) {
                pomodoro.addTag(this.externalTypeName);
            }
            pomodoro.save();
        });
    }
}

class FileStorage {
    constructor(plugin) {
        this.plugin = plugin;
    }
    getStorageFilePath() {
        const { settings } = this.plugin;
        return settings.storageFile.endsWith('.md') ? settings.storageFile : `${settings.storageFile}.md`;
    }
    getStorageFile() {
        const { vault } = this.plugin.app;
        const filePath = this.getStorageFilePath();
        return vault.getFiles().find(file => file.path === filePath);
    }
    formatTimerData(timer) {
        const { settings } = this.plugin;
        const duration = timer.getApproximatedDuration(settings.approximation);
        return timer.id + ': `' + timer.getFormattedDurationString(duration) + '`';
    }
    formatHeader() {
        const todayDate = (new Date()).toISOString().substr(0, 10);
        return `## ${todayDate}`;
    }
    save(timer) {
        return __awaiter(this, void 0, void 0, function* () {
            const { vault } = this.plugin.app;
            const filePath = this.getStorageFilePath();
            const header = this.formatHeader();
            const data = this.formatTimerData(timer);
            let file = this.getStorageFile();
            if (file) {
                const content = yield vault.read(file);
                let newContent = content.toString();
                if (!content.contains(header)) {
                    if (content.trim().length > 0) {
                        newContent += os__namespace.EOL + os__namespace.EOL;
                    }
                    newContent += header + os__namespace.EOL;
                }
                yield vault.modify(file, newContent + os__namespace.EOL + data);
            }
            else {
                file = yield vault.create(filePath, header + os__namespace.EOL + os__namespace.EOL + data);
            }
        });
    }
}

class TimerModal extends obsidian.FuzzySuggestModal {
    constructor(plugin) {
        super(plugin.app);
        this.plugin = plugin;
    }
    getItems() {
        return this.plugin.timeManager.getAll();
    }
    getItemText(timer) {
        return `${timer.id} ${timer.getFormattedDurationString()}`;
    }
}
class StartTimerModal extends TimerModal {
    onChooseItem(timer) {
        if (timer.isRunning) {
            new obsidian.Notice(`Timer ${timer.id} is already running`);
            return;
        }
        timer.start();
        new obsidian.Notice(`Timer ${timer.id} started`);
    }
}
class PauseTimerModal extends TimerModal {
    onChooseItem(timer) {
        if (!timer.isRunning) {
            new obsidian.Notice(`Timer ${timer.id} is not running`);
            return;
        }
        timer.pause();
        new obsidian.Notice(`Timer ${timer.id} paused`);
    }
}
class DeleteTimerModal extends TimerModal {
    onChooseItem(timer) {
        timer.timerManager.deleteById(timer.id);
        new obsidian.Notice(`Timer ${timer.id} deleted`);
    }
}
class SaveTimerModal extends TimerModal {
    onChooseItem(timer) {
        timer.save();
    }
}
class EditTimerModal extends TimerModal {
    onChooseItem(timer) {
        timer.pause();
        new TimerEditModal(this.plugin, timer).open();
    }
}

class NewTimerModal extends obsidian.Modal {
    constructor(plugin) {
        super(plugin.app);
        this.plugin = plugin;
    }
    onOpen() {
        this.contentEl.empty();
        this.contentEl.createEl('h2', {
            text: 'Start a new timer',
            cls: ['time-tracker-modal-title']
        });
        const form = this.contentEl.createEl('form');
        let identifier = '';
        new obsidian.Setting(form)
            .setName('Identifier')
            .setDesc('It must be unique')
            .addText(text => text
            .setValue(identifier)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            identifier = value;
        }))
            .inputEl
            .focus());
        const commandContainer = form.createDiv({ cls: ['time-tracker-modal-commands'] });
        const btnSave = new obsidian.ButtonComponent(commandContainer)
            .setButtonText('start');
        // eslint-disable-next-line @typescript-eslint/no-this-alias
        const modal = this;
        form.onsubmit = function (event) {
            event.stopPropagation();
            if (identifier.trim().length === 0) {
                return;
            }
            btnSave.setDisabled(true);
            try {
                const timer = modal.plugin.timeManager.createNew(identifier);
                timer.start();
            }
            finally {
                btnSave.setDisabled(false);
            }
            modal.close();
        };
    }
}

const NO_TIMER_RUNNING_LABEL = 'no running timer';
const EVENT_BUS_NAME = 'time-tracker-event-bus';
class TimerTrackerPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.loadSettings();
            this.addSettingTab(new TimeTrackerIssueSettingTab(this.app, this));
            this.initFileStorage();
            this.initTimerManager();
            yield this.loadTimers();
            this.registerMarkdownCodeBlockProcessor('timetracker', this.timerBlockProcessor.bind(this));
            this.registerMarkdownPostProcessor(this.postProcessor.bind(this));
            this.registerView(VIEW_TYPE_OUTPUT, (leaf) => {
                this.timerView = new TimerView(leaf, this);
                return this.timerView;
            });
            this.addCommand({
                id: 'app:show-timers',
                name: 'Show timers',
                callback: () => this.initLeaf(),
                hotkeys: []
            });
            this.addCommand({
                id: 'app:start-timer',
                name: 'Start timer',
                callback: () => {
                    new StartTimerModal(this).open();
                },
                hotkeys: []
            });
            this.addCommand({
                id: 'app:pause-all-timers',
                name: 'Pause all timers',
                callback: () => this.timeManager.pauseAll(),
                hotkeys: []
            });
            this.addCommand({
                id: 'app:pause-timer',
                name: 'Pause timer',
                callback: () => {
                    new PauseTimerModal(this).open();
                },
                hotkeys: []
            });
            this.addCommand({
                id: 'app:delete-all-timers',
                name: 'Delete all timers',
                callback: () => this.timeManager.deleteAll(),
                hotkeys: []
            });
            this.addCommand({
                id: 'app:delete-timer',
                name: 'Delete timer',
                callback: () => {
                    new DeleteTimerModal(this).open();
                },
                hotkeys: []
            });
            this.addCommand({
                id: 'app:save-timer',
                name: 'Save timer',
                callback: () => {
                    new SaveTimerModal(this).open();
                },
                hotkeys: []
            });
            this.addCommand({
                id: 'app:new-timer',
                name: 'New timer',
                callback: () => {
                    new NewTimerModal(this).open();
                },
                hotkeys: []
            });
            this.addCommand({
                id: 'app:edit-timer',
                name: 'Edit timer',
                callback: () => {
                    new EditTimerModal(this).open();
                },
                hotkeys: []
            });
            this.initStatusBar();
            this.registerInterval(window.setInterval(() => {
                this.refreshStatusBar();
                window.document.querySelectorAll('.timer-control-container.has-timer-view')
                    .forEach(timeWidget => timeWidget.dispatchEvent(new CustomEvent('tick')));
            }, 1000));
        });
    }
    initStatusBar() {
        if (!this.settings.enableStatusBar) {
            if (this.statusBarItem) {
                this.statusBarItem.remove();
                this.statusBarItem = null;
            }
            return;
        }
        if (this.statusBarItem) {
            return;
        }
        this.statusBarItem = this.addStatusBarItem();
        this.statusBarItem.addClass('timer-view-status-bar');
    }
    initLeaf() {
        const { workspace } = this.app;
        if (workspace.getLeavesOfType(VIEW_TYPE_OUTPUT).length > 0) {
            return;
        }
        const leaf = workspace.getRightLeaf(false);
        if (!leaf) {
            return;
        }
        leaf.setViewState({
            type: VIEW_TYPE_OUTPUT,
            active: true
        });
    }
    initFileStorage() {
        this.fileStorage = new FileStorage(this);
    }
    initTimerManager() {
        this.timeManager = new TimerManager();
        this.timeManager.on('timer-start', this.saveTimers.bind(this));
        this.timeManager.on('timer-paused', this.saveTimers.bind(this));
        this.timeManager.on('timer-resumed', this.saveTimers.bind(this));
        this.timeManager.on('timer-reset', this.saveTimers.bind(this));
        this.timeManager.on('timer-deleted', this.saveTimers.bind(this));
        this.timeManager.on('timer-edited', this.saveTimers.bind(this));
        this.timeManager.on('timer-saved', this.onTimerSave.bind(this));
        window.timeTrackerEventBus = document.createComment(EVENT_BUS_NAME);
        window.timeTrackerEventBus.addEventListener('timersaved', this.onTimerSaved.bind(this));
    }
    refreshStatusBar() {
        if (!this.statusBarItem) {
            return;
        }
        const runningTimer = this.timeManager.getRunningTimer();
        if (!runningTimer) {
            this.statusBarItem.innerHTML = NO_TIMER_RUNNING_LABEL;
            return;
        }
        this.statusBarItem.empty();
        this.statusBarItem.createSpan({
            text: runningTimer.id
        });
        this.statusBarItem.createSpan({
            text: runningTimer.getFormattedDurationString()
        }).addClass('timer-view');
    }
    timerBlockProcessor(content, el) {
        return __awaiter(this, void 0, void 0, function* () {
            el.empty();
            el.addClasses(['timer-control-container', 'has-timer-view']);
            new TimerWidget(this, el)
                .setIdentifier(content.replace(new RegExp(os__namespace.EOL, 'g'), ''))
                .showTimerView()
                .showTimerControl();
        });
    }
    postProcessor(el) {
        const issueBlocks = Array.from(el.querySelectorAll('.timer-tracker-compatible'));
        if (!issueBlocks.length) {
            return;
        }
        for (const issueBlock of issueBlocks) {
            const identifier = issueBlock.getAttribute('data-identifier');
            if (!identifier) {
                continue;
            }
            const typeName = issueBlock.getAttribute('data-type');
            if (!typeName) {
                continue;
            }
            const timerWidget = issueBlock.parentElement.createDiv({ cls: ['timer-control-container'] });
            new TimerWidget(this, timerWidget)
                .setIdentifier(identifier)
                .setType(typeName)
                .showTimerControl();
        }
    }
    onTimerSave(event) {
        const { timer } = event;
        if (timer.hasTag('jira') && window.jiraEventBus) {
            window.jiraEventBus.dispatchEvent(new CustomEvent('timersave', {
                detail: {
                    id: timer.id,
                    duration: timer.getApproximatedDuration(this.settings.approximation),
                    startedAt: timer.startedAt,
                    tags: timer.tags
                }
            }));
            // this.onTimerSaved will be fired by jira plugin
            return;
        }
        if (timer.hasTag('redmine') && window.redmineEventBus) {
            window.redmineEventBus.dispatchEvent(new CustomEvent('timersave', {
                detail: {
                    id: timer.id,
                    duration: timer.getApproximatedDuration(this.settings.approximation),
                    startedAt: timer.startedAt,
                    tags: timer.tags
                }
            }));
            // this.onTimerSaved will be fired by redmine plugin
            return;
        }
        this.fileStorage.save(timer).then(() => {
            if (timer.hasTag('pomodoro')) {
                new obsidian.Notice(`Pomodoro saved to file '${this.settings.storageFile}'`);
            }
            else {
                new obsidian.Notice(`Timer saved to file '${this.settings.storageFile}'`);
            }
            this.onTimerSaved({
                detail: {
                    id: timer.id,
                    tags: timer.tags
                }
            });
        });
    }
    onTimerSaved(event) {
        if (event.detail.tags.includes('pomodoro')) {
            return;
        }
        this.timeManager.deleteById(event.detail.id);
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            let data = yield this.loadData();
            data = data || { settings: {} };
            this.settings = Object.assign({}, DEFAULT_SETTINGS, data.settings || {});
        });
    }
    loadTimers() {
        return __awaiter(this, void 0, void 0, function* () {
            let data = yield this.loadData();
            data = data || { timers: [] };
            if (data.timers.length === 0) {
                return;
            }
            this.timeManager.restore(data.timers);
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData({
                settings: this.settings,
                timers: this.timeManager.dump()
            });
            this.initStatusBar();
        });
    }
    saveTimers() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData({
                settings: this.settings,
                timers: this.timeManager.dump()
            });
        });
    }
    onunload() {
        delete window.timeTrackerEventBus;
    }
}

module.exports = TimerTrackerPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9saWIvaWNvbnMudHMiLCJzcmMvc2V0dGluZ3MudHMiLCJzcmMvc2V0dGluZ3MtdGFiLnRzIiwic3JjL2xpYi90aW1lci50cyIsInNyYy9lZGl0LXRpbWVyLW1vZGFsLnRzIiwic3JjL3RpbWVyLXZpZXcudHMiLCJzcmMvdGltZXItd2lkZ2V0LnRzIiwic3JjL2xpYi9maWxlLXN0b3JhZ2UudHMiLCJzcmMvdGltZXItY29tbWFuZHMtbW9kYWwudHMiLCJzcmMvbmV3LXRpbWVyLW1vZGFsLnRzIiwic3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XHJcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xyXG4gICAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEluKHN0YXRlLCByZWNlaXZlcikge1xyXG4gICAgaWYgKHJlY2VpdmVyID09PSBudWxsIHx8ICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlY2VpdmVyICE9PSBcImZ1bmN0aW9uXCIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHVzZSAnaW4nIG9wZXJhdG9yIG9uIG5vbi1vYmplY3RcIik7XHJcbiAgICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xyXG59XHJcbiIsImltcG9ydCB7IGFkZEljb24gfSBmcm9tICdvYnNpZGlhbidcblxuYWRkSWNvbigndGltZS10cmFja2VyLXBsYXknLCBgXG48Z1xuICAgaWQ9XCJnNFwiXG4gICB0cmFuc2Zvcm09XCJtYXRyaXgoMC44MDMxMzc2NCwwLDAsMC44MDMxMzc2NCwtMS4zNjkxNTg0ZS00LC0xLjM2OTE1ODRlLTQpXCI+XG5cdDxwYXRoXG4gICBzdHlsZT1cImZpbGw6Y3VycmVudENvbG9yO2ZpbGwtb3BhY2l0eTogMDtzdHJva2Utd2lkdGg6IDg7c3Ryb2tlOiBjdXJyZW50Q29sb3I7XCJcbiAgIGQ9XCJtIDExMy45NTYsNTcuMDA2IC05Ny40LC01Ni4yIGMgLTQsLTIuMyAtOSwwLjYgLTksNS4yIHYgMTEyLjUgYyAwLDQuNiA1LDcuNSA5LDUuMiBsIDk3LjQsLTU2LjIgYyA0LC0yLjQwMSA0LC04LjIgMCwtMTAuNSB6XCJcbiAgIGlkPVwicGF0aDJcIi8+XG48L2c+XG5gKVxuXG5hZGRJY29uKCd0aW1lLXRyYWNrZXItcGF1c2UnLCBgXG48Z1xuICAgaWQ9XCJnNlwiXG4gICB0cmFuc2Zvcm09XCJzY2FsZSgwLjM2MDU3MDg2KVwiPlxuXHQ8cGF0aFxuICAgc3R5bGU9XCJmaWxsOmN1cnJlbnRDb2xvcjtmaWxsLW9wYWNpdHk6IDA7c3Ryb2tlLXdpZHRoOiAxNDtzdHJva2U6IGN1cnJlbnRDb2xvcjtcIlxuICAgZD1cIm0gMTQuMjIsNDUuNjY1IHYgMTg2LjAxMyBjIDAsMjUuMjIzIDE2LjcxMSw0NS42NiAzNy4zMjcsNDUuNjYgMjAuNjE4LDAgMzcuMzM5LC0yMC40MzggMzcuMzM5LC00NS42NiBWIDQ1LjY2NSBDIDg4Ljg4NiwyMC40NTQgNzIuMTY1LDAuMDA4IDUxLjU0NywwLjAwOCAzMC45MzEsMCAxNC4yMiwyMC40NTQgMTQuMjIsNDUuNjY1IFpcIlxuICAgaWQ9XCJwYXRoMlwiLz5cblx0PHBhdGhcbiAgIHN0eWxlPVwiZmlsbDpjdXJyZW50Q29sb3I7ZmlsbC1vcGFjaXR5OiAwO3N0cm9rZS13aWR0aDogMTQ7c3Ryb2tlOiBjdXJyZW50Q29sb3I7XCJcbiAgIGQ9XCJNIDIyNS43OCwwIEMgMjA1LjE2NiwwIDE4OC40NTUsMjAuNDQ2IDE4OC40NTUsNDUuNjU3IFYgMjMxLjY3IGMgMCwyNS4yMjMgMTYuNzExLDQ1LjY1MiAzNy4zMjUsNDUuNjUyIDIwLjYxNCwwIDM3LjMzOCwtMjAuNDMgMzcuMzM4LC00NS42NTIgViA0NS42NjUgQyAyNjMuMTA5LDIwLjQ1NCAyNDYuMzk0LDAgMjI1Ljc4LDAgWlwiXG4gICBpZD1cInBhdGg0XCIvPlxuPC9nPlxuYClcblxuYWRkSWNvbigndGltZS10cmFja2VyLXJlc3VtZScsIGBcbjxnXG4gICBpZD1cImcxNFwiXG4gICB0cmFuc2Zvcm09XCJtYXRyaXgoMi4xNzUwOTUyLDAsMCwyLjE3NTA5NTIsMC4wMDEwODY2NCwtOS4xZS03KVwiPlxuXHQ8Z1xuICAgaWQ9XCJnMTJcIj5cblx0XHQ8Z1xuICAgaWQ9XCJnNFwiPlxuXHRcdFx0PHBhdGhcbiAgICAgICBzdHlsZT1cImZpbGw6Y3VycmVudENvbG9yO2ZpbGwtb3BhY2l0eTogMDtzdHJva2Utd2lkdGg6IDM7c3Ryb2tlOiBjdXJyZW50Q29sb3I7XCJcbiAgIGQ9XCJtIDkuNjI5LDQ0LjY4IGMgLTEuMTU0LDEuMTYgLTIuODk1LDEuNTEgLTQuNDA3LDAuODg1IC0xLjUxMywtMC42MjMgLTIuNSwtMi4xIC0yLjUsLTMuNzM1IFYgNC4wNDMgYyAwLC0xLjYzNyAwLjk4NywtMy4xMTIgMi41LC0zLjczNiAxLjUxMywtMC42MjUgMy4yNTMsLTAuMjc1IDQuNDA3LDAuODg1IGwgMTcuODYyLDE3Ljk1MSBjIDIuMDg4LDIuMDk4IDIuMDg4LDUuNDg4IDAsNy41ODUgelwiXG4gICBpZD1cInBhdGgyXCIvPlxuXHRcdDwvZz5cblx0XHQ8Z1xuICAgaWQ9XCJnMTBcIj5cblx0XHRcdDxnXG4gICBpZD1cImc4XCI+XG5cdFx0XHRcdDxwYXRoXG4gICAgICAgICBzdHlsZT1cImZpbGw6Y3VycmVudENvbG9yO2ZpbGwtb3BhY2l0eTogMDtzdHJva2Utd2lkdGg6IDM7c3Ryb2tlOiBjdXJyZW50Q29sb3I7XCJcbiAgIGQ9XCJtIDM4LjI1Miw0NS45NzUgYyAtMi43NjMsMCAtNSwtMi4yMzggLTUsLTUgViA1IGMgMCwtMi43NjIgMi4yMzcsLTUgNSwtNSAyLjc2MiwwIDUsMi4yMzggNSw1IHYgMzUuOTc1IGMgMCwyLjc2MSAtMi4yMzksNSAtNSw1IHpcIlxuICAgaWQ9XCJwYXRoNlwiLz5cblx0XHRcdDwvZz5cblx0XHQ8L2c+XG5cdDwvZz5cbjwvZz5cbmApXG5cbmFkZEljb24oJ3RpbWUtdHJhY2tlci1zdG9wJywgYFxuPHJlY3Qgc3R5bGU9XCJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOmN1cnJlbnRDb2xvcjtzdHJva2Utd2lkdGg6NS4wMTI1OTQ3O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjFcIiBpZD1cInJlY3Q4MjVcIiB3aWR0aD1cIjg5LjY3NDkwNFwiIGhlaWdodD1cIjg4LjczNzQwNFwiIHg9XCI1LjE2MjU0ODFcIiB5PVwiNS42MzEyOTgxXCI+XG48L3JlY3Q+XG5gKVxuIiwiZXhwb3J0IGRlZmF1bHQgaW50ZXJmYWNlIFRpbWVyVHJhY2tlclBsdWdpblNldHRpbmdzIHtcblx0YXBwcm94aW1hdGlvbjogbnVtYmVyO1xuXHRwb21vZG9yb0R1cmF0aW9uOiBudW1iZXI7XG5cdHN0b3JhZ2VGaWxlOiBzdHJpbmc7XG5cdGVuYWJsZVN0YXR1c0JhcjogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFRpbWVyVHJhY2tlclBsdWdpblNldHRpbmdzID0ge1xuXHRhcHByb3hpbWF0aW9uOiAwLFxuXHRwb21vZG9yb0R1cmF0aW9uOiA1ICogNjAsXG5cdHN0b3JhZ2VGaWxlOiAnVGltZVRyYWNrZXInLFxuXHRlbmFibGVTdGF0dXNCYXI6IHRydWUsXG59XG4iLCJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCBUaW1lclRyYWNrZXJQbHVnaW4gZnJvbSAnLi9tYWluJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lVHJhY2tlcklzc3VlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFRpbWVyVHJhY2tlclBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBUaW1lclRyYWNrZXJQbHVnaW4pIHtcbiAgICBzdXBlcihhcHAsIHBsdWdpbilcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxuICB9XG5cbiAgYXN5bmMgZGlzcGxheSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKVxuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnVGltZXIgYXBwcm94aW1hdGlvbicpXG4gICAgICAuc2V0RGVzYygnUm91bmQgc3BlbnQgdGltZScpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgLmFkZE9wdGlvbnMoe1xuICAgICAgICAgICcwJzogJ2Rpc2FibGVkJyxcbiAgICAgICAgICAnNjAnOiAnMSBtaW51dGUnLFxuICAgICAgICAgICczMDAnOiAnNSBtaW51dGVzJyxcbiAgICAgICAgICAnNjAwJzogJzEwIG1pbnV0ZXMnLFxuICAgICAgICAgICc5MDAnOiAnMTUgbWludXRlcydcbiAgICAgICAgfSlcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwcHJveGltYXRpb24udG9TdHJpbmcoKSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwcHJveGltYXRpb24gPSBwYXJzZUludCh2YWx1ZSlcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuICAgICAgICB9KSlcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ1BvbW9kb3JvIGR1cmF0aW9uJylcbiAgICAgIC5zZXREZXNjKCdUaGUgZHVyYXRpb24gb2YgcG9tb2Rvcm8gdGltZXInKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgIC5hZGRPcHRpb25zKHtcbiAgICAgICAgICAnMzAwJzogJzUgbWludXRlcycsXG4gICAgICAgICAgJzkwMCc6ICcxNSBtaW51dGVzJyxcbiAgICAgICAgICAnMTUwMCc6ICcyNSBtaW51dGVzJyxcbiAgICAgICAgICAnMTgwMCc6ICczMCBtaW51dGVzJyxcbiAgICAgICAgfSlcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnBvbW9kb3JvRHVyYXRpb24udG9TdHJpbmcoKSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvbW9kb3JvRHVyYXRpb24gPSBwYXJzZUludCh2YWx1ZSlcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuICAgICAgICB9KSlcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ1N0b3JhZ2UgZmlsZScpXG4gICAgICAuc2V0RGVzYygnVGhlIHBhdGggb2YgZmlsZSB1c2VkIHRvIHN0b3JlIHNhdmVkIHRpbWVycycpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnN0b3JhZ2VGaWxlKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RvcmFnZUZpbGUgPSB2YWx1ZVxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG4gICAgICAgIH0pKVxuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnU3RhdHVzIGJhciBpdGVtJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgdGhlIHN0YXR1cyBiYXIgaXRlbSBmb3IgY3VycmVudCBydW5uaW5nIHRpbWVyJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlU3RhdHVzQmFyKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlU3RhdHVzQmFyID0gdmFsdWVcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuICAgICAgICB9KSlcbiAgfVxufVxuIiwiaW50ZXJmYWNlIFRpbWVyRHVyYXRpb24ge1xuICBob3VyczogbnVtYmVyXG4gIG1pbnV0ZXM6IG51bWJlclxuICBzZWNvbmRzOiBudW1iZXJcbn1cblxuZnVuY3Rpb24gZ2V0VGltZXN0YW1wKGRhdGU/OiBEYXRlKTogbnVtYmVyIHtcbiAgZGF0ZSA9IGRhdGUgfHwgbmV3IERhdGUoKVxuICByZXR1cm4gTWF0aC50cnVuYyhkYXRlLmdldFRpbWUoKSAvIDEwMDApXG59XG5cbmV4cG9ydCBjbGFzcyBUaW1lciB7XG4gIGlkOiBzdHJpbmdcbiAgZHVyYXRpb25BY2M6IG51bWJlclxuICBzdGFydGVkQXQ6IERhdGVcbiAgcmVzdW1lZEF0OiBEYXRlXG4gIHBhdXNlZEF0OiBEYXRlXG4gIGlzUnVubmluZzogYm9vbGVhblxuICB0aW1lck1hbmFnZXI6IFRpbWVyTWFuYWdlclxuICB0YWdzOiBzdHJpbmdbXVxuXG4gIGNvbnN0cnVjdG9yKHRpbWVyTWFuYWdlcjogVGltZXJNYW5hZ2VyLCBpZDogc3RyaW5nKSB7XG4gICAgdGhpcy50aW1lck1hbmFnZXIgPSB0aW1lck1hbmFnZXJcbiAgICB0aGlzLmlkID0gaWRcbiAgICB0aGlzLnN0YXJ0ZWRBdCA9IG51bGxcbiAgICB0aGlzLnBhdXNlZEF0ID0gbnVsbFxuICAgIHRoaXMucmVzdW1lZEF0ID0gbnVsbFxuICAgIHRoaXMuZHVyYXRpb25BY2MgPSAwXG4gICAgdGhpcy50YWdzID0gW11cbiAgfVxuXG4gIHN0YXJ0KCk6IHZvaWQge1xuICAgIHRoaXMudGltZXJNYW5hZ2VyLnBhdXNlQWxsKClcblxuICAgIGlmICh0aGlzLnN0YXJ0ZWRBdCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzdW1lKClcbiAgICB9XG4gICAgdGhpcy5zdGFydGVkQXQgPSBuZXcgRGF0ZSgpXG4gICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlXG5cbiAgICB0aGlzLnRpbWVyTWFuYWdlci5lbWl0KCd0aW1lci1zdGFydCcsIHsgdGltZXI6IHRoaXMgfSlcbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuc3RhcnRlZEF0ID0gbnVsbFxuICAgIHRoaXMucGF1c2VkQXQgPSBudWxsXG4gICAgdGhpcy5yZXN1bWVkQXQgPSBudWxsXG4gICAgdGhpcy5kdXJhdGlvbkFjYyA9IDBcblxuICAgIHRoaXMudGltZXJNYW5hZ2VyLmVtaXQoJ3RpbWVyLXJlc2V0JywgeyB0aW1lcjogdGhpcyB9KVxuICB9XG5cbiAgcmVzdGFydCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlc2V0KClcbiAgICB0aGlzLnN0YXJ0KClcbiAgfVxuXG4gIHBhdXNlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICAvLyB0aW1lciB3YXMgYWxyZWFkeSBwYXVzZWQgYXQgbGVhc3Qgb25jZVxuICAgIGlmICh0aGlzLnBhdXNlZEF0ICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnVwZGF0ZUR1cmF0aW9uQWNjdW11bGF0b3IoKVxuICAgIH1cbiAgICB0aGlzLnBhdXNlZEF0ID0gbmV3IERhdGUoKVxuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2VcblxuICAgIHRoaXMudGltZXJNYW5hZ2VyLmVtaXQoJ3RpbWVyLXBhdXNlZCcsIHsgdGltZXI6IHRoaXMgfSlcbiAgfVxuXG4gIHNhdmUoKTogdm9pZCB7XG4gICAgdGhpcy5wYXVzZSgpXG4gICAgdGhpcy50aW1lck1hbmFnZXIuZW1pdCgndGltZXItc2F2ZWQnLCB7IHRpbWVyOiB0aGlzIH0pXG4gIH1cblxuICByZXN1bWUoKTogdm9pZCB7XG4gICAgdGhpcy50aW1lck1hbmFnZXIucGF1c2VBbGwoKVxuXG4gICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgLy8gdGltZXIgd2FzIGFscmVhZHkgcmVzdW1lZCBhdCBsZWFzdCBvbmNlXG4gICAgaWYgKHRoaXMucmVzdW1lZEF0ICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnVwZGF0ZUR1cmF0aW9uQWNjdW11bGF0b3IoKVxuICAgIH1cbiAgICB0aGlzLnJlc3VtZWRBdCA9IG5ldyBEYXRlKClcbiAgICB0aGlzLmlzUnVubmluZyA9IHRydWVcblxuICAgIHRoaXMudGltZXJNYW5hZ2VyLmVtaXQoJ3RpbWVyLXJlc3VtZWQnLCB7IHRpbWVyOiB0aGlzIH0pXG4gIH1cblxuICB1cGRhdGVEdXJhdGlvbkFjY3VtdWxhdG9yKCk6IHZvaWQge1xuICAgIHRoaXMuZHVyYXRpb25BY2MgPSB0aGlzLmdldER1cmF0aW9uKClcbiAgfVxuXG4gIGdldEZvcm1hdHRlZER1cmF0aW9uT2JqZWN0KHNlY29uZHM/OiBudW1iZXIpOiBUaW1lckR1cmF0aW9uIHtcbiAgICBjb25zdCBwYXJ0cyA9IHRoaXMuZ2V0Rm9ybWF0dGVkRHVyYXRpb25TdHJpbmcoc2Vjb25kcykuc3BsaXQoJzonKVxuICAgIHJldHVybiB7XG4gICAgICBob3VyczogcGFyc2VJbnQocGFydHNbMF0pLFxuICAgICAgbWludXRlczogcGFyc2VJbnQocGFydHNbMV0pLFxuICAgICAgc2Vjb25kczogcGFyc2VJbnQocGFydHNbMl0pXG4gICAgfVxuICB9XG5cbiAgZ2V0Rm9ybWF0dGVkRHVyYXRpb25TdHJpbmcoc2Vjb25kcz86IG51bWJlcik6IHN0cmluZyB7XG4gICAgc2Vjb25kcyA9IHNlY29uZHMgfHwgdGhpcy5nZXREdXJhdGlvbigpXG4gICAgcmV0dXJuIChuZXcgRGF0ZShzZWNvbmRzICogMTAwMCkpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDExLCA4KVxuICB9XG5cbiAgZm9yY2VEdXJhdGlvbihzZWNvbmRzOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHRoaXMucGF1c2UoKVxuICAgIH1cbiAgICB0aGlzLmR1cmF0aW9uQWNjID0gc2Vjb25kc1xuICAgIHRoaXMucmVzdW1lZEF0ID0gdGhpcy5wYXVzZWRBdFxuICB9XG5cbiAgZ2V0QXBwcm94aW1hdGVkRHVyYXRpb24oc2Vjb25kczogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBsZXQgZHVyYXRpb24gPSB0aGlzLmdldER1cmF0aW9uKClcbiAgICBpZiAoc2Vjb25kcyA9PT0gMCkge1xuICAgICAgcmV0dXJuIGR1cmF0aW9uXG4gICAgfVxuXG4gICAgY29uc3QgYXBwcm94aW1hdGlvbkVkZ2UgPSBzZWNvbmRzIC8gMlxuICAgIGNvbnN0IGxlZnRIb3VycyA9IGR1cmF0aW9uICUgc2Vjb25kc1xuICBcbiAgICBpZiAobGVmdEhvdXJzIDwgYXBwcm94aW1hdGlvbkVkZ2UpIHtcbiAgICAgIGR1cmF0aW9uID0gZHVyYXRpb24gLSBsZWZ0SG91cnNcbiAgICB9IGVsc2Uge1xuICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbiAtIGxlZnRIb3VycyArIHNlY29uZHNcbiAgICB9XG4gIFxuICAgIGlmIChkdXJhdGlvbiA8PSAwKSB7XG4gICAgICBkdXJhdGlvbiA9IHNlY29uZHNcbiAgICB9XG4gIFxuICAgIHJldHVybiBNYXRoLmNlaWwoZHVyYXRpb24pXG4gIH1cblxuICBnZXREdXJhdGlvbigpOiBudW1iZXIge1xuICAgIGNvbnN0IG5vdyA9IGdldFRpbWVzdGFtcCgpXG5cbiAgICAvLyB0aW1lciBzdGFydGVkXG4gICAgaWYgKHRoaXMuc3RhcnRlZEF0ICE9PSBudWxsICYmXG4gICAgICAgdGhpcy5pc1J1bm5pbmcgJiZcbiAgICAgICB0aGlzLnBhdXNlZEF0ID09PSBudWxsICYmXG4gICAgICAgdGhpcy5yZXN1bWVkQXQgPT09IG51bGxcbiAgICApIHtcbiAgICAgIHJldHVybiBub3cgLSBnZXRUaW1lc3RhbXAodGhpcy5zdGFydGVkQXQpXG4gICAgfVxuXG4gICAgLy8gdGltZXIgcGF1c2VkXG4gICAgaWYgKHRoaXMuc3RhcnRlZEF0ICE9PSBudWxsICYmXG4gICAgICAgIXRoaXMuaXNSdW5uaW5nICYmXG4gICAgICAgdGhpcy5wYXVzZWRBdCAhPT0gbnVsbCAmJlxuICAgICAgIHRoaXMucmVzdW1lZEF0ID09PSBudWxsXG4gICAgKSB7XG4gICAgICByZXR1cm4gZ2V0VGltZXN0YW1wKHRoaXMucGF1c2VkQXQpIC0gZ2V0VGltZXN0YW1wKHRoaXMuc3RhcnRlZEF0KVxuICAgIH1cblxuICAgIC8vIHRpbWVyIHJlc3VtZWRcbiAgICBpZiAodGhpcy5zdGFydGVkQXQgIT09IG51bGwgJiZcbiAgICAgICB0aGlzLmlzUnVubmluZyAmJlxuICAgICAgIHRoaXMucGF1c2VkQXQgIT09IG51bGwgJiZcbiAgICAgICB0aGlzLnJlc3VtZWRBdCAhPT0gbnVsbCAmJlxuICAgICAgIHRoaXMuZHVyYXRpb25BY2MgPT09IDBcbiAgICApIHtcbiAgICAgIHJldHVybiAoZ2V0VGltZXN0YW1wKHRoaXMucGF1c2VkQXQpIC0gZ2V0VGltZXN0YW1wKHRoaXMuc3RhcnRlZEF0KSkgKyAobm93IC0gZ2V0VGltZXN0YW1wKHRoaXMucmVzdW1lZEF0KSlcbiAgICB9XG5cbiAgICAvLyB0aW1lciBwYXVzZWQgYXQgbGVhc3Qgb25jZVxuICAgIGlmICh0aGlzLnN0YXJ0ZWRBdCAhPT0gbnVsbCAmJlxuICAgICAgICF0aGlzLmlzUnVubmluZyAmJlxuICAgICAgIHRoaXMucGF1c2VkQXQgIT09IG51bGwgJiZcbiAgICAgICB0aGlzLnJlc3VtZWRBdCAhPT0gbnVsbCAmJlxuICAgICAgIHRoaXMuZHVyYXRpb25BY2MgPiAwXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcy5kdXJhdGlvbkFjY1xuICAgIH1cblxuICAgIC8vIHRpbWVyIHJlc3VtZWQgYXQgbGVhc3Qgb25jZVxuICAgIGlmICh0aGlzLnN0YXJ0ZWRBdCAhPT0gbnVsbCAmJlxuICAgICAgIHRoaXMuaXNSdW5uaW5nICYmXG4gICAgICAgdGhpcy5wYXVzZWRBdCAhPT0gbnVsbCAmJlxuICAgICAgIHRoaXMucmVzdW1lZEF0ICE9PSBudWxsICYmXG4gICAgICAgdGhpcy5kdXJhdGlvbkFjYyA+IDBcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLmR1cmF0aW9uQWNjICsgKG5vdyAtIGdldFRpbWVzdGFtcCh0aGlzLnJlc3VtZWRBdCkpXG4gICAgfVxuXG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNldER1cmF0aW9uKHNlY29uZHM6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICB0aGlzLnN0YXJ0ZWRBdCA9IG5vd1xuICAgIHRoaXMucGF1c2VkQXQgPSBub3dcbiAgICB0aGlzLnJlc3VtZWRBdCA9IG5vd1xuICAgIHRoaXMuZHVyYXRpb25BY2MgPSBzZWNvbmRzXG5cbiAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgIHRoaXMucmVzdW1lZEF0ID0gbmV3IERhdGUoKVxuICAgIH1cblxuICAgIHRoaXMudGltZXJNYW5hZ2VyLmVtaXQoJ3RpbWVyLWVkaXRlZCcsIHsgdGltZXI6IHRoaXMgfSlcbiAgfVxuXG4gIGFkZFRhZyh0YWc6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMudGFncy5wdXNoKHRhZylcbiAgfVxuXG4gIGhhc1RhZyh0YWc6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRhZ3MuaW5kZXhPZih0YWcpICE9PSAtMVxuICB9XG5cbiAgcmVtb3ZlVGFnKHRhZzogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnRhZ3MuaW5kZXhPZih0YWcpXG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMudGFncy5zcGxpY2UoaW5kZXgsIDEpXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaW1lckV2ZW50IHtcbiAgdGltZXI/OiBUaW1lclxufVxuXG5pbnRlcmZhY2UgRXhwb3J0ZWRUaW1lciBleHRlbmRzIE9iamVjdCB7XG4gIGlkOiBzdHJpbmdcbiAgZHVyYXRpb25BY2M6IG51bWJlclxuICBzdGFydGVkQXQ6IERhdGVcbiAgcmVzdW1lZEF0OiBEYXRlXG4gIHBhdXNlZEF0OiBEYXRlXG4gIGlzUnVubmluZzogYm9vbGVhblxuICB0YWdzOiBzdHJpbmdbXVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lck1hbmFnZXIge1xuICB0aW1lcnM6IFRpbWVyW11cbiAgc3Vic2NyaXB0aW9uczogTWFwPHN0cmluZywgWyhldmVudDogVGltZXJFdmVudCkgPT4gdm9pZF0+XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50aW1lcnMgPSBbXVxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IG5ldyBNYXAoKVxuICB9XG5cbiAgZ2V0QWxsKCk6IFRpbWVyW10ge1xuICAgIHJldHVybiB0aGlzLnRpbWVyc1xuICB9XG5cbiAgZ2V0UnVubmluZ1RpbWVyKCk6IFRpbWVyfHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMudGltZXJzLmZpbmQodGltZXIgPT4gdGltZXIuaXNSdW5uaW5nKVxuICB9XG5cbiAgZ2V0QnlJZChpZDogc3RyaW5nKTogVGltZXJ8dW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy50aW1lcnMuZmluZCh0aW1lciA9PiB0aW1lci5pZCA9PT0gaWQpXG4gIH1cblxuICBjcmVhdGVOZXcoaWQ6IHN0cmluZyk6IFRpbWVyIHtcbiAgICBpZiAodGhpcy5nZXRCeUlkKGlkKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyAnRHVwbGljYXRlZCBUaW1lciBJZGVudGlmaWVyJ1xuICAgIH1cbiAgICBjb25zdCB0aW1lciA9IG5ldyBUaW1lcih0aGlzLCBpZClcbiAgICB0aGlzLnRpbWVycy5wdXNoKHRpbWVyKVxuICAgIHJldHVybiB0aW1lclxuICB9XG5cbiAgcGF1c2VBbGwoKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCB0aW1lciBvZiB0aGlzLnRpbWVycykge1xuICAgICAgdGltZXIucGF1c2UoKVxuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZUJ5SWQoaWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy50aW1lcnMuZmluZEluZGV4KHRpbWVyID0+IHRpbWVyLmlkID09PSBpZClcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICB0aHJvdyAnVGltZXIgSWRlbnRpZmllciBOb3QgRm91bmQnXG4gICAgfVxuICAgIHRoaXMudGltZXJzLnNwbGljZShpbmRleCwgMSlcbiAgICB0aGlzLmVtaXQoJ3RpbWVyLWRlbGV0ZWQnLCB7IHRpbWVyOiB7IGlkIH0gfSlcbiAgfVxuXG4gIGRlbGV0ZUFsbCgpOiB2b2lkIHtcbiAgICBjb25zdCBpZHMgPSB0aGlzLnRpbWVycy5tYXAodGltZXIgPT4gdGltZXIuaWQpXG4gICAgdGhpcy50aW1lcnMgPSBbXVxuICAgIGZvciAoY29uc3QgaWQgb2YgaWRzKSB7XG4gICAgICB0aGlzLmVtaXQoJ3RpbWVyLWRlbGV0ZWQnLCB7IHRpbWVyOiB7IGlkIH0gfSlcbiAgICB9XG4gIH1cblxuICBjcmVhdGVOZXdQb21vZG9ybyhpZDpzdHJpbmcsIHNlY29uZHM6IG51bWJlcik6IFRpbWVyIHtcbiAgICBjb25zdCB0aW1lciA9IG5ldyBUaW1lcih0aGlzLCBpZClcbiAgICB0aW1lci5hZGRUYWcoJ3BvbW9kb3JvJylcbiAgICB0aW1lci5zZXREdXJhdGlvbihzZWNvbmRzKVxuICAgIHJldHVybiB0aW1lclxuICB9XG5cbiAgb24oZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IChldmVudDogVGltZXJFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdWJzY3JpcHRpb25zLmhhcyhldmVudCkpIHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5zZXQoZXZlbnQsIFtjYWxsYmFja10pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9ucyA9IHRoaXMuc3Vic2NyaXB0aW9ucy5nZXQoZXZlbnQpXG4gICAgc3Vic2NyaXB0aW9ucy5wdXNoKGNhbGxiYWNrKVxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5zZXQoZXZlbnQsIHN1YnNjcmlwdGlvbnMpXG4gIH1cblxuICBlbWl0KGV2ZW50OiBzdHJpbmcsIGRhdGE6IHVua25vd24gPSB7fSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdWJzY3JpcHRpb25zLmhhcyhldmVudCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBzdWJzY3JpcHRpb25zID0gdGhpcy5zdWJzY3JpcHRpb25zLmdldChldmVudClcbiAgICBmb3IgKGNvbnN0IHN1YnNjcmlwdGlvbiBvZiBzdWJzY3JpcHRpb25zKSB7XG4gICAgICBzdWJzY3JpcHRpb24oZGF0YSlcbiAgICB9XG4gIH1cblxuICBkdW1wKCk6IEV4cG9ydGVkVGltZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMudGltZXJzLm1hcCh0aW1lciA9PiAoe1xuICAgICAgaWQ6IHRpbWVyLmlkLFxuICAgICAgZHVyYXRpb25BY2M6IHRpbWVyLmR1cmF0aW9uQWNjLFxuICAgICAgc3RhcnRlZEF0OiB0aW1lci5zdGFydGVkQXQsXG4gICAgICByZXN1bWVkQXQ6IHRpbWVyLnJlc3VtZWRBdCxcbiAgICAgIHBhdXNlZEF0OiB0aW1lci5wYXVzZWRBdCxcbiAgICAgIGlzUnVubmluZzogdGltZXIuaXNSdW5uaW5nLFxuICAgICAgdGFnczogdGltZXIudGFncyxcbiAgICB9KSlcbiAgfVxuXG4gIHJlc3RvcmUodGltZXJzOiBFeHBvcnRlZFRpbWVyW10pOiB2b2lkIHtcbiAgICBjb25zdCBpbXBvcnRlZCA9IFtdXG4gICAgZm9yIChjb25zdCB0aW1lciBvZiB0aW1lcnMpIHtcbiAgICAgIGNvbnN0IG5ld1RpbWVyID0gbmV3IFRpbWVyKHRoaXMsIHRpbWVyLmlkKVxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGltZXIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgdmFsdWUgPSAodGltZXIgYXMgYW55KVtrZXldXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgY2FzZSAnZHVyYXRpb25BY2MnOlxuICAgICAgICAgICAgbmV3VGltZXIuZHVyYXRpb25BY2MgPSBwYXJzZUludCh2YWx1ZSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnc3RhcnRlZEF0JzpcbiAgICAgICAgICAgIG5ld1RpbWVyLnN0YXJ0ZWRBdCA9IG5ldyBEYXRlKHZhbHVlKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdyZXN1bWVkQXQnOlxuICAgICAgICAgICAgbmV3VGltZXIucmVzdW1lZEF0ID0gbmV3IERhdGUodmFsdWUpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ3BhdXNlZEF0JzpcbiAgICAgICAgICAgIG5ld1RpbWVyLnBhdXNlZEF0ID0gbmV3IERhdGUodmFsdWUpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2lzUnVubmluZyc6XG4gICAgICAgICAgICBuZXdUaW1lci5pc1J1bm5pbmcgPSB2YWx1ZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICd0YWdzJzpcbiAgICAgICAgICAgIG5ld1RpbWVyLnRhZ3MgPSB2YWx1ZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaW1wb3J0ZWQucHVzaChuZXdUaW1lcilcbiAgICB9XG5cbiAgICBpZiAoaW1wb3J0ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLnRpbWVycyA9IGltcG9ydGVkXG4gIH1cbn1cbiIsImltcG9ydCB7IEJ1dHRvbkNvbXBvbmVudCwgTW9kYWwsIFRleHRDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCB7IFRpbWVyIH0gZnJvbSAnLi9saWIvdGltZXInXG5pbXBvcnQgVGltZXJUcmFja2VyUGx1Z2luIGZyb20gJy4vbWFpbidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZXJFZGl0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHBsdWdpbjogVGltZXJUcmFja2VyUGx1Z2luXG4gIHRpbWVyOiBUaW1lclxuICBob3Vyc0lucHV0OiBUZXh0Q29tcG9uZW50XG4gIG1pbnV0ZXNJbnB1dDogVGV4dENvbXBvbmVudFxuICBzZWNvbmRzSW5wdXQ6IFRleHRDb21wb25lbnRcblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFRpbWVyVHJhY2tlclBsdWdpbiwgdGltZXI6IFRpbWVyKSB7XG5cdFx0c3VwZXIocGx1Z2luLmFwcClcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxuICAgIHRoaXMudGltZXIgPSB0aW1lclxuXHR9XG5cbiAgb25PcGVuKCk6IHZvaWQge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KClcblxuICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHtcbiAgICAgIHRleHQ6IGBFZGl0IHRpbWVyICR7dGhpcy50aW1lci5pZH0gZHVyYXRpb25gLFxuICAgICAgY2xzOiBbJ3RpbWUtdHJhY2tlci1tb2RhbC10aXRsZSddXG4gICAgfSlcblxuICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy50aW1lci5nZXRGb3JtYXR0ZWREdXJhdGlvbk9iamVjdCgpXG5cbiAgICBjb25zdCBmb3JtID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2Zvcm0nKVxuICAgIGZvcm0ub25zdWJtaXQgPSB0aGlzLm9uVGltZXJFZGl0LmJpbmQodGhpcylcbiAgICBmb3JtLmFkZENsYXNzKCd0aW1lLXRyYWNrZXItZWRpdCcpXG5cbiAgICB0aGlzLmhvdXJzSW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChmb3JtKVxuICAgIHRoaXMuaG91cnNJbnB1dC5zZXRWYWx1ZShkdXJhdGlvbi5ob3Vycy50b1N0cmluZygpKVxuICAgIHRoaXMuaG91cnNJbnB1dC5pbnB1dEVsLnR5cGUgPSAnbnVtYmVyJ1xuICAgIHRoaXMuaG91cnNJbnB1dC5pbnB1dEVsLnNldEF0dHJpYnV0ZSgnbWluJywgJzAnKVxuICAgIHRoaXMuaG91cnNJbnB1dC5pbnB1dEVsLnNldEF0dHJpYnV0ZSgnbWF4JywgJzI0JylcbiAgICB0aGlzLmhvdXJzSW5wdXQuaW5wdXRFbC5mb2N1cygpXG5cbiAgICBmb3JtLmNyZWF0ZVNwYW4oe1xuICAgICAgdGV4dDogJzonXG4gICAgfSlcblxuICAgIHRoaXMubWludXRlc0lucHV0ID0gbmV3IFRleHRDb21wb25lbnQoZm9ybSlcbiAgICB0aGlzLm1pbnV0ZXNJbnB1dC5zZXRWYWx1ZShkdXJhdGlvbi5taW51dGVzLnRvU3RyaW5nKCkpXG4gICAgdGhpcy5taW51dGVzSW5wdXQuaW5wdXRFbC50eXBlID0gJ251bWJlcidcbiAgICB0aGlzLm1pbnV0ZXNJbnB1dC5pbnB1dEVsLnNldEF0dHJpYnV0ZSgnbWluJywgJzAnKVxuICAgIHRoaXMubWludXRlc0lucHV0LmlucHV0RWwuc2V0QXR0cmlidXRlKCdtYXgnLCAnNTknKVxuXG4gICAgZm9ybS5jcmVhdGVTcGFuKHtcbiAgICAgIHRleHQ6ICc6J1xuICAgIH0pXG5cbiAgICB0aGlzLnNlY29uZHNJbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KGZvcm0pXG4gICAgdGhpcy5zZWNvbmRzSW5wdXQuc2V0VmFsdWUoZHVyYXRpb24uc2Vjb25kcy50b1N0cmluZygpKVxuICAgIHRoaXMuc2Vjb25kc0lucHV0LmlucHV0RWwudHlwZSA9ICdudW1iZXInXG4gICAgdGhpcy5zZWNvbmRzSW5wdXQuaW5wdXRFbC5zZXRBdHRyaWJ1dGUoJ21pbicsICcwJylcbiAgICB0aGlzLnNlY29uZHNJbnB1dC5pbnB1dEVsLnNldEF0dHJpYnV0ZSgnbWF4JywgJzU5JylcblxuICAgIGNvbnN0IGNvbW1hbmRDb250YWluZXIgPSBmb3JtLmNyZWF0ZURpdih7IGNsczogWyd0aW1lLXRyYWNrZXItbW9kYWwtY29tbWFuZHMnXSB9KVxuICAgIG5ldyBCdXR0b25Db21wb25lbnQoY29tbWFuZENvbnRhaW5lcilcbiAgICAgIC5zZXRCdXR0b25UZXh0KCdlZGl0JylcbiAgfVxuXG4gIG9uVGltZXJFZGl0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBob3VycyA9IHBhcnNlSW50KHRoaXMuaG91cnNJbnB1dC5nZXRWYWx1ZSgpLnRyaW0oKSB8fCAnMCcpXG4gICAgY29uc3QgbWludXRlcyA9IHBhcnNlSW50KHRoaXMubWludXRlc0lucHV0LmdldFZhbHVlKCkudHJpbSgpIHx8ICcwJylcbiAgICBjb25zdCBzZWNvbmRzID0gcGFyc2VJbnQodGhpcy5zZWNvbmRzSW5wdXQuZ2V0VmFsdWUoKS50cmltKCkgfHwgJzAnKVxuXG4gICAgdGhpcy50aW1lci5zZXREdXJhdGlvbihzZWNvbmRzICsgKG1pbnV0ZXMqNjApICsgKGhvdXJzKjYwKjYwKSlcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxufVxuIiwiaW1wb3J0IFRpbWVyVHJhY2tlclBsdWdpbiBmcm9tICcuL21haW4nXG5pbXBvcnQgeyBCdXR0b25Db21wb25lbnQsIEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQgVGltZXJFZGl0TW9kYWwgZnJvbSAnLi9lZGl0LXRpbWVyLW1vZGFsJ1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX09VVFBVVCA9ICd0aW1lLXRyYWNrZXInXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVyVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcblx0b3V0cHV0RWxlbTogSFRNTEVsZW1lbnQ7XG5cdHBsdWdpbjogVGltZXJUcmFja2VyUGx1Z2luXG4gIHRpbWVyTGlzdDogSFRNTFVMaXN0RWxlbWVudDtcblx0dGltZXJUYWJsZTogSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7XG5cblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBUaW1lclRyYWNrZXJQbHVnaW4pIHtcblx0XHRzdXBlcihsZWFmKVxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luXG5cdH1cblxuXHRnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBWSUVXX1RZUEVfT1VUUFVUXG5cdH1cblxuXHRnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiAnVGltZSBUcmFja2VyJ1xuXHR9XG5cblx0Z2V0SWNvbigpOiBzdHJpbmcge1xuXHRcdHJldHVybiAnY2xvY2snXG5cdH1cblxuXHRhc3luYyBvbk9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpc1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KClcblxuICAgIGNvbnN0IHRhYmxlID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ3RhYmxlJylcblx0XHR0YWJsZS5hZGRDbGFzcygndGltZS10cmFja2VyLXRhYmxlJylcblx0XHR0aGlzLnRpbWVyVGFibGUgPSB0YWJsZS5jcmVhdGVUQm9keSgpXG5cblx0XHR0aGlzLnJlZnJlc2hUaW1lckxpc3QoKVxuICAgIHRoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwodGhpcy5yZWZyZXNoVGltZXJMaXN0LmJpbmQodGhpcyksIDEwMDApKVxuXHR9XG5cbiAgcmVmcmVzaFRpbWVyTGlzdCgpOiB2b2lkIHtcbiAgICB0aGlzLnRpbWVyVGFibGUuZW1wdHkoKVxuXG4gICAgY29uc3QgdGltZXJzID0gdGhpcy5wbHVnaW4udGltZU1hbmFnZXIuZ2V0QWxsKClcblx0XHRpZiAodGltZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29uc3Qgcm93ID0gdGhpcy50aW1lclRhYmxlLmNyZWF0ZUVsKCd0cicpXG5cdFx0XHRyb3cuY3JlYXRlRWwoJ3RkJywge1xuXHRcdFx0XHR0ZXh0OiAnbm8gYWN0aXZlIHRpbWVycycsXG5cdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHQnY29sLXNwYW4nOiAnMydcblx0XHRcdFx0fSxcblx0XHRcdFx0Y2xzOiBbJ3RpbWUtdHJhY2tlci10YWJsZS1uby10aW1lcnMnXVxuXHRcdFx0fSlcblx0XHRcdHJldHVyblxuXHRcdH1cblxuICAgIGZvciAoY29uc3QgdGltZXIgb2YgdGltZXJzKSB7XG5cdFx0XHRjb25zdCByb3cgPSB0aGlzLnRpbWVyVGFibGUuY3JlYXRlRWwoJ3RyJylcblxuXHRcdFx0cm93LmNyZWF0ZUVsKCd0ZCcsIHtcblx0XHRcdFx0dGV4dDogdGltZXIuaWQsXG5cdFx0XHRcdGNsczogWyd0aW1lLXRyYWNrZXItdGFibGUtaWQnXVxuXHRcdFx0fSlcblxuXHRcdFx0cm93LmNyZWF0ZUVsKCd0ZCcsIHtcblx0XHRcdFx0dGV4dDogdGltZXIuZ2V0Rm9ybWF0dGVkRHVyYXRpb25TdHJpbmcoKSxcblx0XHRcdFx0Y2xzOiBbJ3RpbWUtdHJhY2tlci10YWJsZS10aW1lJ11cblx0XHRcdH0pLmFkZENsYXNzKCd0aW1lci12aWV3JylcblxuICAgICAgY29uc3QgY29tbWFuZENvbnRhaW5lciA9IHJvdy5jcmVhdGVFbCgndGQnLCB7XG5cdFx0XHRcdGNsczogWyd0aW1lLXRyYWNrZXItdGFibGUtY29tbWFuZHMnXVxuXHRcdFx0fSlcblxuXHRcdFx0aWYgKHRpbWVyLmlzUnVubmluZykge1xuICAgICAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbW1hbmRDb250YWluZXIpXG4gICAgICAgICAgLnNldEljb24oJ3RpbWUtdHJhY2tlci1wYXVzZScpLnNldFRvb2x0aXAoJ1BhdXNlIFRpbWVyJylcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB0aW1lci5wYXVzZSgpXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hUaW1lckxpc3QoKVxuICAgICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbW1hbmRDb250YWluZXIpXG4gICAgICAgICAgLnNldEljb24oJ3RpbWUtdHJhY2tlci1yZXN1bWUnKS5zZXRUb29sdGlwKCdTdGFydCBUaW1lcicpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgdGltZXIucmVzdW1lKClcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaFRpbWVyTGlzdCgpXG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuXHRcdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChjb21tYW5kQ29udGFpbmVyKVxuICAgICAgICAuc2V0SWNvbigncGVuY2lsJykuc2V0VG9vbHRpcCgnRWRpdCBUaW1lcicpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHR0aW1lci5wYXVzZSgpXG5cdFx0XHRcdFx0dGhpcy5yZWZyZXNoVGltZXJMaXN0KClcblxuICAgICAgICAgIG5ldyBUaW1lckVkaXRNb2RhbCh0aGlzLnBsdWdpbiwgdGltZXIpLm9wZW4oKVxuICAgICAgICB9KVxuXG4gICAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbW1hbmRDb250YWluZXIpXG4gICAgICAgIC5zZXRJY29uKCd0aW1lLXRyYWNrZXItc3RvcCcpLnNldFRvb2x0aXAoJ1N0b3AgVGltZXInKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGltZXIuc2F2ZSgpXG5cdFx0XHRcdFx0dGhpcy5yZWZyZXNoVGltZXJMaXN0KClcbiAgICAgICAgfSlcblxuICAgICAgbmV3IEJ1dHRvbkNvbXBvbmVudChjb21tYW5kQ29udGFpbmVyKVxuICAgICAgICAuc2V0SWNvbigndHJhc2gnKS5zZXRUb29sdGlwKCdEZWxldGUgVGltZXInKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4udGltZU1hbmFnZXIuZGVsZXRlQnlJZCh0aW1lci5pZClcblx0XHRcdFx0XHR0aGlzLnJlZnJlc2hUaW1lckxpc3QoKVxuICAgICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFRpbWVyVHJhY2tlclBsdWdpbiBmcm9tICcuL21haW4nXG5pbXBvcnQgeyBCdXR0b25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCBUaW1lckVkaXRNb2RhbCBmcm9tICcuL2VkaXQtdGltZXItbW9kYWwnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVyV2lkZ2V0IHtcbiAgZWw6IEhUTUxFbGVtZW50O1xuICBwbHVnaW46IFRpbWVyVHJhY2tlclBsdWdpbjtcbiAgaWRlbnRpZmllcjogc3RyaW5nO1xuICB0aW1lckNvbnRyb2xDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICBpc3N1ZUJsb2NrOiBFbGVtZW50O1xuICB0aW1lclZpZXc6IEVsZW1lbnQ7XG4gIGV4dGVybmFsVHlwZU5hbWU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IFRpbWVyVHJhY2tlclBsdWdpbiwgZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgICB0aGlzLmVsID0gZWxcbiAgICB0aGlzLnBsdWdpbi50aW1lTWFuYWdlci5vbigndGltZXItc3RhcnQnLCB0aGlzLnJlZnJlc2hUaW1lckNvbnRyb2wuYmluZCh0aGlzKSlcbiAgICB0aGlzLnBsdWdpbi50aW1lTWFuYWdlci5vbigndGltZXItcGF1c2VkJywgdGhpcy5yZWZyZXNoVGltZXJDb250cm9sLmJpbmQodGhpcykpXG4gICAgdGhpcy5wbHVnaW4udGltZU1hbmFnZXIub24oJ3RpbWVyLXJlc3VtZWQnLCB0aGlzLnJlZnJlc2hUaW1lckNvbnRyb2wuYmluZCh0aGlzKSlcbiAgICB0aGlzLnBsdWdpbi50aW1lTWFuYWdlci5vbigndGltZXItcmVzZXQnLCB0aGlzLnJlZnJlc2hUaW1lckNvbnRyb2wuYmluZCh0aGlzKSlcbiAgICB0aGlzLnBsdWdpbi50aW1lTWFuYWdlci5vbigndGltZXItZGVsZXRlZCcsIHRoaXMucmVmcmVzaFRpbWVyQ29udHJvbC5iaW5kKHRoaXMpKVxuICAgIHRoaXMucGx1Z2luLnRpbWVNYW5hZ2VyLm9uKCd0aW1lci1lZGl0ZWQnLCB0aGlzLnJlZnJlc2hUaW1lckNvbnRyb2wuYmluZCh0aGlzKSlcblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndGljaycsIHRoaXMucmVmcmVzaFRpbWVyVmlldy5iaW5kKHRoaXMpKVxuICB9XG5cbiAgc2V0VHlwZShuYW1lOiBzdHJpbmcpOiBUaW1lcldpZGdldCB7XG4gICAgdGhpcy5leHRlcm5hbFR5cGVOYW1lID0gbmFtZVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHNldElkZW50aWZpZXIoaWRlbnRpZmllcjogc3RyaW5nKTogVGltZXJXaWRnZXQge1xuICAgIHRoaXMuZWwuZGF0YXNldC5pZGVudGlmaWVyID0gaWRlbnRpZmllclxuICAgIHRoaXMuZWwuZW1wdHkoKVxuXG4gICAgdGhpcy5pZGVudGlmaWVyID0gaWRlbnRpZmllclxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHNob3dUaW1lclZpZXcoKTogVGltZXJXaWRnZXQge1xuICAgIHRoaXMudGltZXJWaWV3ID0gdGhpcy5lbC5jcmVhdGVTcGFuKHsgY2xzOiBbJ3RpbWVyLXZpZXcnXSB9KVxuICAgIHRoaXMucmVmcmVzaFRpbWVyVmlldygpXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgcmVmcmVzaFRpbWVyVmlldygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMudGltZXJWaWV3KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB0aW1lciA9IHRoaXMucGx1Z2luLnRpbWVNYW5hZ2VyLmdldEJ5SWQodGhpcy5pZGVudGlmaWVyKVxuICAgIGlmICghdGltZXIpIHtcbiAgICAgIHRoaXMudGltZXJWaWV3LnNldFRleHQoJzAwOjAwOjAwJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMudGltZXJWaWV3LnNldFRleHQodGltZXIuZ2V0Rm9ybWF0dGVkRHVyYXRpb25TdHJpbmcoKSlcbiAgfVxuXG4gIHNob3dUaW1lckNvbnRyb2woKTogVGltZXJXaWRnZXQge1xuICAgIHRoaXMudGltZXJDb250cm9sQ29udGFpbmVyID0gdGhpcy5lbC5jcmVhdGVEaXYoeyBjbHM6IFsndGltZXItY29udHJvbCddIH0pXG4gICAgdGhpcy5yZWZyZXNoVGltZXJDb250cm9sKClcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICByZWZyZXNoVGltZXJDb250cm9sKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy50aW1lckNvbnRyb2xDb250YWluZXIpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLnRpbWVyQ29udHJvbENvbnRhaW5lci5lbXB0eSgpXG5cbiAgICBjb25zdCB0aW1lciA9IHRoaXMucGx1Z2luLnRpbWVNYW5hZ2VyLmdldEJ5SWQodGhpcy5pZGVudGlmaWVyKVxuICAgIGlmICh0aW1lcikge1xuICAgICAgbmV3IEJ1dHRvbkNvbXBvbmVudCh0aGlzLnRpbWVyQ29udHJvbENvbnRhaW5lcilcbiAgICAgICAgLnNldEljb24oJ3RyYXNoJykuc2V0VG9vbHRpcCgnRGVsZXRlIFRpbWVyJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIHRoaXMucGx1Z2luLnRpbWVNYW5hZ2VyLmRlbGV0ZUJ5SWQodGltZXIuaWQpXG4gICAgICAgICAgdGhpcy5yZWZyZXNoVGltZXJWaWV3KClcbiAgICAgICAgfSlcblxuICAgICAgbmV3IEJ1dHRvbkNvbXBvbmVudCh0aGlzLnRpbWVyQ29udHJvbENvbnRhaW5lcilcbiAgICAgICAgLnNldEljb24oJ3BlbmNpbCcpLnNldFRvb2x0aXAoJ0VkaXQgVGltZXInKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGltZXIucGF1c2UoKVxuICAgICAgICAgIHRoaXMucmVmcmVzaFRpbWVyVmlldygpXG5cbiAgICAgICAgICBuZXcgVGltZXJFZGl0TW9kYWwodGhpcy5wbHVnaW4sIHRpbWVyKS5vcGVuKClcbiAgICAgICAgfSlcblxuICAgICAgbmV3IEJ1dHRvbkNvbXBvbmVudCh0aGlzLnRpbWVyQ29udHJvbENvbnRhaW5lcilcbiAgICAgICAgLnNldEljb24oJ3RpbWUtdHJhY2tlci1zdG9wJykuc2V0VG9vbHRpcCgnU3RvcCBUaW1lcicpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICB0aW1lci5zYXZlKClcbiAgICAgICAgICB0aGlzLnJlZnJlc2hUaW1lclZpZXcoKVxuICAgICAgICB9KVxuXG4gICAgICBpZiAodGltZXIuaXNSdW5uaW5nKSB7XG4gICAgICAgIG5ldyBCdXR0b25Db21wb25lbnQodGhpcy50aW1lckNvbnRyb2xDb250YWluZXIpXG4gICAgICAgICAgLnNldEljb24oJ3RpbWUtdHJhY2tlci1wYXVzZScpLnNldFRvb2x0aXAoJ1BhdXNlIFRpbWVyJylcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB0aW1lci5wYXVzZSgpXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUaW1lclZpZXcoKVxuICAgICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgQnV0dG9uQ29tcG9uZW50KHRoaXMudGltZXJDb250cm9sQ29udGFpbmVyKVxuICAgICAgICAgIC5zZXRJY29uKCd0aW1lLXRyYWNrZXItcmVzdW1lJykuc2V0VG9vbHRpcCgnU3RhcnQgVGltZXInKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHRpbWVyLnJlc3VtZSgpXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hUaW1lclZpZXcoKVxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IEJ1dHRvbkNvbXBvbmVudCh0aGlzLnRpbWVyQ29udHJvbENvbnRhaW5lcilcbiAgICAgICAgLnNldEljb24oJ3RpbWUtdHJhY2tlci1wbGF5Jykuc2V0VG9vbHRpcCgnU3RhcnQgVGltZXInKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgY29uc3QgdGltZXIgPSB0aGlzLnBsdWdpbi50aW1lTWFuYWdlci5jcmVhdGVOZXcodGhpcy5pZGVudGlmaWVyKVxuICAgICAgICAgIGlmICh0aGlzLmV4dGVybmFsVHlwZU5hbWUpIHtcbiAgICAgICAgICAgIHRpbWVyLmFkZFRhZyh0aGlzLmV4dGVybmFsVHlwZU5hbWUpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGltZXIuc3RhcnQoKVxuICAgICAgICAgIHRoaXMucmVmcmVzaFRpbWVyVmlldygpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgbmV3IEJ1dHRvbkNvbXBvbmVudCh0aGlzLnRpbWVyQ29udHJvbENvbnRhaW5lcilcbiAgICAgIC5zZXRJY29uKCdjbG9jaycpLnNldFRvb2x0aXAoJ1N0b3JlIFRpbWUnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBwb21vZG9ybyA9IHRoaXMucGx1Z2luLnRpbWVNYW5hZ2VyLmNyZWF0ZU5ld1BvbW9kb3JvKHRoaXMuaWRlbnRpZmllciwgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9tb2Rvcm9EdXJhdGlvbilcbiAgICAgICAgaWYgKHRoaXMuZXh0ZXJuYWxUeXBlTmFtZSkge1xuICAgICAgICAgIHBvbW9kb3JvLmFkZFRhZyh0aGlzLmV4dGVybmFsVHlwZU5hbWUpXG4gICAgICAgIH1cblxuICAgICAgICBwb21vZG9yby5zYXZlKClcbiAgICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQgVGltZXJUcmFja2VyUGx1Z2luIGZyb20gJy4uL21haW4nXG5pbXBvcnQgKiBhcyBvcyBmcm9tICdvcydcbmltcG9ydCB7IFRpbWVyIH0gZnJvbSAnLi90aW1lcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsZVN0b3JhZ2Uge1xuICBwbHVnaW46IFRpbWVyVHJhY2tlclBsdWdpblxuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogVGltZXJUcmFja2VyUGx1Z2luKSB7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW5cbiAgfVxuXG4gIGdldFN0b3JhZ2VGaWxlUGF0aCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgc2V0dGluZ3MgfSA9IHRoaXMucGx1Z2luXG4gICAgcmV0dXJuIHNldHRpbmdzLnN0b3JhZ2VGaWxlLmVuZHNXaXRoKCcubWQnKSA/IHNldHRpbmdzLnN0b3JhZ2VGaWxlIDogYCR7c2V0dGluZ3Muc3RvcmFnZUZpbGV9Lm1kYFxuICB9XG5cbiAgZ2V0U3RvcmFnZUZpbGUoKTogVEZpbGV8dW5kZWZpbmVkIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB0aGlzLnBsdWdpbi5hcHBcbiAgICBjb25zdCBmaWxlUGF0aCA9IHRoaXMuZ2V0U3RvcmFnZUZpbGVQYXRoKClcblxuICAgIHJldHVybiB2YXVsdC5nZXRGaWxlcygpLmZpbmQoZmlsZSA9PiBmaWxlLnBhdGggPT09IGZpbGVQYXRoKVxuICB9XG5cbiAgZm9ybWF0VGltZXJEYXRhKHRpbWVyOiBUaW1lcik6IHN0cmluZyB7XG4gICAgY29uc3QgeyBzZXR0aW5ncyB9ID0gdGhpcy5wbHVnaW5cbiAgICBjb25zdCBkdXJhdGlvbiA9IHRpbWVyLmdldEFwcHJveGltYXRlZER1cmF0aW9uKHNldHRpbmdzLmFwcHJveGltYXRpb24pXG4gICAgcmV0dXJuIHRpbWVyLmlkICsgJzogYCcgKyB0aW1lci5nZXRGb3JtYXR0ZWREdXJhdGlvblN0cmluZyhkdXJhdGlvbikgKydgJ1xuICB9XG5cbiAgZm9ybWF0SGVhZGVyKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9kYXlEYXRlID0gKG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKVxuICAgIHJldHVybiBgIyMgJHt0b2RheURhdGV9YFxuICB9XG5cbiAgYXN5bmMgc2F2ZSh0aW1lcjogVGltZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB0aGlzLnBsdWdpbi5hcHBcblxuICAgIGNvbnN0IGZpbGVQYXRoID0gdGhpcy5nZXRTdG9yYWdlRmlsZVBhdGgoKVxuICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuZm9ybWF0SGVhZGVyKClcbiAgICBjb25zdCBkYXRhID0gdGhpcy5mb3JtYXRUaW1lckRhdGEodGltZXIpXG5cbiAgICBsZXQgZmlsZSA9IHRoaXMuZ2V0U3RvcmFnZUZpbGUoKVxuICAgIGlmIChmaWxlKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdmF1bHQucmVhZChmaWxlKVxuICAgICAgbGV0IG5ld0NvbnRlbnQgPSBjb250ZW50LnRvU3RyaW5nKClcblxuICAgICAgaWYgKCFjb250ZW50LmNvbnRhaW5zKGhlYWRlcikpIHtcbiAgICAgICAgaWYgKGNvbnRlbnQudHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBuZXdDb250ZW50ICs9IG9zLkVPTCArIG9zLkVPTFxuICAgICAgICB9XG4gICAgICAgIG5ld0NvbnRlbnQgKz0gaGVhZGVyICsgb3MuRU9MXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50ICsgb3MuRU9MICsgZGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgaGVhZGVyICsgb3MuRU9MICsgb3MuRU9MICsgZGF0YSlcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEZ1enp5U3VnZ2VzdE1vZGFsLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCBUaW1lckVkaXRNb2RhbCBmcm9tICcuL2VkaXQtdGltZXItbW9kYWwnXG5pbXBvcnQgeyBUaW1lciB9IGZyb20gJy4vbGliL3RpbWVyJ1xuaW1wb3J0IFRpbWVyVHJhY2tlclBsdWdpbiBmcm9tICcuL21haW4nXG5cbmFic3RyYWN0IGNsYXNzIFRpbWVyTW9kYWwgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxUaW1lcj4ge1xuICBwbHVnaW46IFRpbWVyVHJhY2tlclBsdWdpblxuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogVGltZXJUcmFja2VyUGx1Z2luKSB7XG5cdFx0c3VwZXIocGx1Z2luLmFwcClcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxuXHR9XG5cbiAgZ2V0SXRlbXMoKTogVGltZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMucGx1Z2luLnRpbWVNYW5hZ2VyLmdldEFsbCgpXG4gIH1cblxuICBnZXRJdGVtVGV4dCh0aW1lcjogVGltZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aW1lci5pZH0gJHt0aW1lci5nZXRGb3JtYXR0ZWREdXJhdGlvblN0cmluZygpfWBcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RhcnRUaW1lck1vZGFsIGV4dGVuZHMgVGltZXJNb2RhbCB7XG4gIG9uQ2hvb3NlSXRlbSh0aW1lcjogVGltZXIpOiB2b2lkIHtcbiAgICBpZiAodGltZXIuaXNSdW5uaW5nKSB7XG4gICAgICBuZXcgTm90aWNlKGBUaW1lciAke3RpbWVyLmlkfSBpcyBhbHJlYWR5IHJ1bm5pbmdgKVxuICAgICAgcmV0dXJuICBcbiAgICB9XG4gICAgdGltZXIuc3RhcnQoKVxuICAgIG5ldyBOb3RpY2UoYFRpbWVyICR7dGltZXIuaWR9IHN0YXJ0ZWRgKVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQYXVzZVRpbWVyTW9kYWwgZXh0ZW5kcyBUaW1lck1vZGFsIHtcbiAgb25DaG9vc2VJdGVtKHRpbWVyOiBUaW1lcik6IHZvaWQge1xuICAgIGlmICghdGltZXIuaXNSdW5uaW5nKSB7XG4gICAgICBuZXcgTm90aWNlKGBUaW1lciAke3RpbWVyLmlkfSBpcyBub3QgcnVubmluZ2ApXG4gICAgICByZXR1cm4gIFxuICAgIH1cbiAgICB0aW1lci5wYXVzZSgpXG4gICAgbmV3IE5vdGljZShgVGltZXIgJHt0aW1lci5pZH0gcGF1c2VkYClcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRGVsZXRlVGltZXJNb2RhbCBleHRlbmRzIFRpbWVyTW9kYWwge1xuICBvbkNob29zZUl0ZW0odGltZXI6IFRpbWVyKTogdm9pZCB7XG4gICAgdGltZXIudGltZXJNYW5hZ2VyLmRlbGV0ZUJ5SWQodGltZXIuaWQpXG4gICAgbmV3IE5vdGljZShgVGltZXIgJHt0aW1lci5pZH0gZGVsZXRlZGApXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNhdmVUaW1lck1vZGFsIGV4dGVuZHMgVGltZXJNb2RhbCB7XG4gIG9uQ2hvb3NlSXRlbSh0aW1lcjogVGltZXIpOiB2b2lkIHtcbiAgICB0aW1lci5zYXZlKClcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRWRpdFRpbWVyTW9kYWwgZXh0ZW5kcyBUaW1lck1vZGFsIHtcbiAgb25DaG9vc2VJdGVtKHRpbWVyOiBUaW1lcik6IHZvaWQge1xuICAgIHRpbWVyLnBhdXNlKClcbiAgICBuZXcgVGltZXJFZGl0TW9kYWwodGhpcy5wbHVnaW4sIHRpbWVyKS5vcGVuKClcbiAgfVxufVxuIiwiaW1wb3J0IHsgQnV0dG9uQ29tcG9uZW50LCBNb2RhbCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0IFRpbWVyVHJhY2tlclBsdWdpbiBmcm9tICcuL21haW4nXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ld1RpbWVyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHBsdWdpbjogVGltZXJUcmFja2VyUGx1Z2luXG5cblx0Y29uc3RydWN0b3IocGx1Z2luOiBUaW1lclRyYWNrZXJQbHVnaW4pIHtcblx0XHRzdXBlcihwbHVnaW4uYXBwKVxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXG5cdH1cblxuICBvbk9wZW4oKTogdm9pZCB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKVxuXG4gICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2gyJywge1xuICAgICAgdGV4dDogJ1N0YXJ0IGEgbmV3IHRpbWVyJyxcbiAgICAgIGNsczogWyd0aW1lLXRyYWNrZXItbW9kYWwtdGl0bGUnXVxuICAgIH0pXG5cbiAgICBjb25zdCBmb3JtID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2Zvcm0nKVxuXG4gICAgbGV0IGlkZW50aWZpZXIgPSAnJ1xuICAgIG5ldyBTZXR0aW5nKGZvcm0pXG4gICAgICAuc2V0TmFtZSgnSWRlbnRpZmllcicpXG4gICAgICAuc2V0RGVzYygnSXQgbXVzdCBiZSB1bmlxdWUnKVxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRWYWx1ZShpZGVudGlmaWVyKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgaWRlbnRpZmllciA9IHZhbHVlXG4gICAgICAgIH0pXG4gICAgICAgIC5pbnB1dEVsXG4gICAgICAgICAgLmZvY3VzKClcbiAgICAgIClcblxuICAgIGNvbnN0IGNvbW1hbmRDb250YWluZXIgPSBmb3JtLmNyZWF0ZURpdih7IGNsczogWyd0aW1lLXRyYWNrZXItbW9kYWwtY29tbWFuZHMnXSB9KVxuICAgIGNvbnN0IGJ0blNhdmUgPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbW1hbmRDb250YWluZXIpXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnc3RhcnQnKVxuICAgIFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgIGNvbnN0IG1vZGFsID0gdGhpc1xuICAgIGZvcm0ub25zdWJtaXQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgICAgaWYgKGlkZW50aWZpZXIudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGJ0blNhdmUuc2V0RGlzYWJsZWQodHJ1ZSlcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdGltZXIgPSBtb2RhbC5wbHVnaW4udGltZU1hbmFnZXIuY3JlYXRlTmV3KGlkZW50aWZpZXIpICBcbiAgICAgICAgdGltZXIuc3RhcnQoKVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgYnRuU2F2ZS5zZXREaXNhYmxlZChmYWxzZSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbW9kYWwuY2xvc2UoKVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgb3MgZnJvbSAnb3MnXG5pbXBvcnQgeyBOb3RpY2UsIFBsdWdpbiwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0ICcuL2xpYi9pY29ucydcbmltcG9ydCBUaW1lclRyYWNrZXJQbHVnaW5TZXR0aW5ncywgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9zZXR0aW5ncydcbmltcG9ydCBKaXJhSXNzdWVTZXR0aW5nVGFiIGZyb20gJy4vc2V0dGluZ3MtdGFiJ1xuaW1wb3J0IFRpbWVyTWFuYWdlciwge1RpbWVyRXZlbnR9IGZyb20gJy4vbGliL3RpbWVyJ1xuaW1wb3J0IFRpbWVyVmlldywgeyBWSUVXX1RZUEVfT1VUUFVUIH0gZnJvbSAnLi90aW1lci12aWV3J1xuaW1wb3J0IFRpbWVyV2lkZ2V0IGZyb20gJy4vdGltZXItd2lkZ2V0J1xuaW1wb3J0IEZpbGVTdG9yYWdlIGZyb20gJy4vbGliL2ZpbGUtc3RvcmFnZSdcbmltcG9ydCB7IERlbGV0ZVRpbWVyTW9kYWwsIFBhdXNlVGltZXJNb2RhbCwgU3RhcnRUaW1lck1vZGFsLCBTYXZlVGltZXJNb2RhbCwgRWRpdFRpbWVyTW9kYWwgfSBmcm9tICcuL3RpbWVyLWNvbW1hbmRzLW1vZGFsJ1xuaW1wb3J0IE5ld1RpbWVyTW9kYWwgZnJvbSAnLi9uZXctdGltZXItbW9kYWwnXG5pbXBvcnQgeyBPblRpbWVyU2F2ZWRFdmVudCB9IGZyb20gJy4vdHlwZXMnXG5cbmNvbnN0IE5PX1RJTUVSX1JVTk5JTkdfTEFCRUwgPSAnbm8gcnVubmluZyB0aW1lcidcbmNvbnN0IEVWRU5UX0JVU19OQU1FID0gJ3RpbWUtdHJhY2tlci1ldmVudC1idXMnXG5cbmRlY2xhcmUgZ2xvYmFsIHtcblx0aW50ZXJmYWNlIFdpbmRvdyB7XG5cdFx0dGltZVRyYWNrZXJFdmVudEJ1czogQ29tbWVudDtcblx0XHRqaXJhRXZlbnRCdXM6IENvbW1lbnQ7XG5cdFx0cmVkbWluZUV2ZW50QnVzOiBDb21tZW50O1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVyVHJhY2tlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBUaW1lclRyYWNrZXJQbHVnaW5TZXR0aW5nc1xuXHR0aW1lTWFuYWdlcjogVGltZXJNYW5hZ2VyXG5cdHRpbWVyVmlldzogVGltZXJWaWV3XG5cdHN0YXR1c0Jhckl0ZW06IEhUTUxFbGVtZW50XG5cdGZpbGVTdG9yYWdlOiBGaWxlU3RvcmFnZVxuXG5cdGFzeW5jIG9ubG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBKaXJhSXNzdWVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSlcblxuXHRcdHRoaXMuaW5pdEZpbGVTdG9yYWdlKClcblxuXHRcdHRoaXMuaW5pdFRpbWVyTWFuYWdlcigpXG5cdFx0YXdhaXQgdGhpcy5sb2FkVGltZXJzKClcblx0XHRcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoJ3RpbWV0cmFja2VyJywgdGhpcy50aW1lckJsb2NrUHJvY2Vzc29yLmJpbmQodGhpcykpXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3Nvcih0aGlzLnBvc3RQcm9jZXNzb3IuYmluZCh0aGlzKSlcblxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxuXHRcdFx0VklFV19UWVBFX09VVFBVVCxcblx0XHRcdChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiB7XG5cdFx0XHRcdHRoaXMudGltZXJWaWV3ID0gbmV3IFRpbWVyVmlldyhsZWFmLCB0aGlzKVxuXHRcdFx0XHRyZXR1cm4gdGhpcy50aW1lclZpZXdcblx0XHRcdH1cblx0XHQpXG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdhcHA6c2hvdy10aW1lcnMnLFxuXHRcdFx0bmFtZTogJ1Nob3cgdGltZXJzJyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmluaXRMZWFmKCksXG5cdFx0XHRob3RrZXlzOiBbXVxuXHRcdH0pXG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdhcHA6c3RhcnQtdGltZXInLFxuXHRcdFx0bmFtZTogJ1N0YXJ0IHRpbWVyJyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBTdGFydFRpbWVyTW9kYWwodGhpcykub3BlbigpXG5cdFx0XHR9LFxuXHRcdFx0aG90a2V5czogW11cblx0XHR9KVxuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnYXBwOnBhdXNlLWFsbC10aW1lcnMnLFxuXHRcdFx0bmFtZTogJ1BhdXNlIGFsbCB0aW1lcnMnLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHRoaXMudGltZU1hbmFnZXIucGF1c2VBbGwoKSxcblx0XHRcdGhvdGtleXM6IFtdXG5cdFx0fSlcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2FwcDpwYXVzZS10aW1lcicsXG5cdFx0XHRuYW1lOiAnUGF1c2UgdGltZXInLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0bmV3IFBhdXNlVGltZXJNb2RhbCh0aGlzKS5vcGVuKClcblx0XHRcdH0sXG5cdFx0XHRob3RrZXlzOiBbXVxuXHRcdH0pXG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdhcHA6ZGVsZXRlLWFsbC10aW1lcnMnLFxuXHRcdFx0bmFtZTogJ0RlbGV0ZSBhbGwgdGltZXJzJyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLnRpbWVNYW5hZ2VyLmRlbGV0ZUFsbCgpLFxuXHRcdFx0aG90a2V5czogW11cblx0XHR9KVxuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnYXBwOmRlbGV0ZS10aW1lcicsXG5cdFx0XHRuYW1lOiAnRGVsZXRlIHRpbWVyJyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBEZWxldGVUaW1lck1vZGFsKHRoaXMpLm9wZW4oKVxuXHRcdFx0fSxcblx0XHRcdGhvdGtleXM6IFtdXG5cdFx0fSlcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2FwcDpzYXZlLXRpbWVyJyxcblx0XHRcdG5hbWU6ICdTYXZlIHRpbWVyJyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBTYXZlVGltZXJNb2RhbCh0aGlzKS5vcGVuKClcblx0XHRcdH0sXG5cdFx0XHRob3RrZXlzOiBbXVxuXHRcdH0pXG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdhcHA6bmV3LXRpbWVyJyxcblx0XHRcdG5hbWU6ICdOZXcgdGltZXInLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0bmV3IE5ld1RpbWVyTW9kYWwodGhpcykub3BlbigpXG5cdFx0XHR9LFxuXHRcdFx0aG90a2V5czogW11cblx0XHR9KVxuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnYXBwOmVkaXQtdGltZXInLFxuXHRcdFx0bmFtZTogJ0VkaXQgdGltZXInLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0bmV3IEVkaXRUaW1lck1vZGFsKHRoaXMpLm9wZW4oKVxuXHRcdFx0fSxcblx0XHRcdGhvdGtleXM6IFtdXG5cdFx0fSlcblxuXHRcdHRoaXMuaW5pdFN0YXR1c0JhcigpXG5cdFx0dGhpcy5yZWdpc3RlckludGVydmFsKHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG5cdFx0XHR0aGlzLnJlZnJlc2hTdGF0dXNCYXIoKVxuXHRcdFx0d2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aW1lci1jb250cm9sLWNvbnRhaW5lci5oYXMtdGltZXItdmlldycpXG5cdFx0XHRcdC5mb3JFYWNoKHRpbWVXaWRnZXQgPT4gdGltZVdpZGdldC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgndGljaycpKSlcblx0XHR9LCAxMDAwKSlcblx0fVxuXG5cdGluaXRTdGF0dXNCYXIoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZVN0YXR1c0Jhcikge1xuXHRcdFx0aWYgKHRoaXMuc3RhdHVzQmFySXRlbSkge1xuXHRcdFx0XHR0aGlzLnN0YXR1c0Jhckl0ZW0ucmVtb3ZlKClcblx0XHRcdFx0dGhpcy5zdGF0dXNCYXJJdGVtID0gbnVsbFxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc3RhdHVzQmFySXRlbSkge1xuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXG5cdFx0dGhpcy5zdGF0dXNCYXJJdGVtID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKClcblx0XHR0aGlzLnN0YXR1c0Jhckl0ZW0uYWRkQ2xhc3MoJ3RpbWVyLXZpZXctc3RhdHVzLWJhcicpXG5cdH1cblxuXHRpbml0TGVhZigpOiB2b2lkIHtcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHBcblxuXHRcdGlmICh3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9PVVRQVVQpLmxlbmd0aCA+IDApIHtcblx0XHRcdHJldHVyblxuXHRcdH1cblxuXHRcdGNvbnN0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKVxuXHRcdGlmICghbGVhZikge1xuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXG5cdFx0bGVhZi5zZXRWaWV3U3RhdGUoe1xuXHRcdFx0dHlwZTogVklFV19UWVBFX09VVFBVVCxcblx0XHRcdGFjdGl2ZTogdHJ1ZVxuXHRcdH0pXG5cdH1cblxuXHRpbml0RmlsZVN0b3JhZ2UoKTogdm9pZCB7XG5cdFx0dGhpcy5maWxlU3RvcmFnZSA9IG5ldyBGaWxlU3RvcmFnZSh0aGlzKVxuXHR9XG5cblx0aW5pdFRpbWVyTWFuYWdlcigpOiB2b2lkIHtcblx0XHR0aGlzLnRpbWVNYW5hZ2VyID0gbmV3IFRpbWVyTWFuYWdlcigpXG5cdFx0dGhpcy50aW1lTWFuYWdlci5vbigndGltZXItc3RhcnQnLCB0aGlzLnNhdmVUaW1lcnMuYmluZCh0aGlzKSlcbiAgICB0aGlzLnRpbWVNYW5hZ2VyLm9uKCd0aW1lci1wYXVzZWQnLCB0aGlzLnNhdmVUaW1lcnMuYmluZCh0aGlzKSlcbiAgICB0aGlzLnRpbWVNYW5hZ2VyLm9uKCd0aW1lci1yZXN1bWVkJywgdGhpcy5zYXZlVGltZXJzLmJpbmQodGhpcykpXG4gICAgdGhpcy50aW1lTWFuYWdlci5vbigndGltZXItcmVzZXQnLCB0aGlzLnNhdmVUaW1lcnMuYmluZCh0aGlzKSlcbiAgICB0aGlzLnRpbWVNYW5hZ2VyLm9uKCd0aW1lci1kZWxldGVkJywgdGhpcy5zYXZlVGltZXJzLmJpbmQodGhpcykpXG4gICAgdGhpcy50aW1lTWFuYWdlci5vbigndGltZXItZWRpdGVkJywgdGhpcy5zYXZlVGltZXJzLmJpbmQodGhpcykpXG5cdFx0dGhpcy50aW1lTWFuYWdlci5vbigndGltZXItc2F2ZWQnLCB0aGlzLm9uVGltZXJTYXZlLmJpbmQodGhpcykpXG5cblx0XHR3aW5kb3cudGltZVRyYWNrZXJFdmVudEJ1cyA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoRVZFTlRfQlVTX05BTUUpXG5cdFx0d2luZG93LnRpbWVUcmFja2VyRXZlbnRCdXMuYWRkRXZlbnRMaXN0ZW5lcigndGltZXJzYXZlZCcsIHRoaXMub25UaW1lclNhdmVkLmJpbmQodGhpcykpXG5cdH1cblxuXHRyZWZyZXNoU3RhdHVzQmFyKCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5zdGF0dXNCYXJJdGVtKSB7XG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdFx0XG5cdFx0Y29uc3QgcnVubmluZ1RpbWVyID0gdGhpcy50aW1lTWFuYWdlci5nZXRSdW5uaW5nVGltZXIoKVxuXHRcdGlmICghcnVubmluZ1RpbWVyKSB7XG5cdFx0XHR0aGlzLnN0YXR1c0Jhckl0ZW0uaW5uZXJIVE1MID0gTk9fVElNRVJfUlVOTklOR19MQUJFTFxuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXG5cdFx0dGhpcy5zdGF0dXNCYXJJdGVtLmVtcHR5KClcblx0XHR0aGlzLnN0YXR1c0Jhckl0ZW0uY3JlYXRlU3Bhbih7XG5cdFx0XHR0ZXh0OiBydW5uaW5nVGltZXIuaWRcblx0XHR9KVxuXHRcdHRoaXMuc3RhdHVzQmFySXRlbS5jcmVhdGVTcGFuKHtcblx0XHRcdHRleHQ6IHJ1bm5pbmdUaW1lci5nZXRGb3JtYXR0ZWREdXJhdGlvblN0cmluZygpXG5cdFx0fSkuYWRkQ2xhc3MoJ3RpbWVyLXZpZXcnKVxuXHR9XG5cblx0YXN5bmMgdGltZXJCbG9ja1Byb2Nlc3Nvcihjb250ZW50OiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGVsLmVtcHR5KClcblx0XHRlbC5hZGRDbGFzc2VzKFsndGltZXItY29udHJvbC1jb250YWluZXInLCAnaGFzLXRpbWVyLXZpZXcnXSlcblxuXHRcdG5ldyBUaW1lcldpZGdldCh0aGlzLCBlbClcblx0XHRcdC5zZXRJZGVudGlmaWVyKGNvbnRlbnQucmVwbGFjZShuZXcgUmVnRXhwKG9zLkVPTCwgJ2cnKSwgJycpKVxuXHRcdFx0LnNob3dUaW1lclZpZXcoKVxuXHRcdFx0LnNob3dUaW1lckNvbnRyb2woKVxuXHR9XG5cblx0cG9zdFByb2Nlc3NvcihlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblx0XHRjb25zdCBpc3N1ZUJsb2NrcyA9IEFycmF5LmZyb20oZWwucXVlcnlTZWxlY3RvckFsbCgnLnRpbWVyLXRyYWNrZXItY29tcGF0aWJsZScpKVx0XHRcblxuXHRcdGlmICghaXNzdWVCbG9ja3MubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IGlzc3VlQmxvY2sgb2YgaXNzdWVCbG9ja3MpIHtcblx0XHRcdGNvbnN0IGlkZW50aWZpZXIgPSBpc3N1ZUJsb2NrLmdldEF0dHJpYnV0ZSgnZGF0YS1pZGVudGlmaWVyJylcblx0XHRcdGlmICghaWRlbnRpZmllcikge1xuXHRcdFx0XHRjb250aW51ZVxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCB0eXBlTmFtZSA9IGlzc3VlQmxvY2suZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKVxuXHRcdFx0aWYgKCF0eXBlTmFtZSkge1xuXHRcdFx0XHRjb250aW51ZVxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCB0aW1lcldpZGdldCA9IGlzc3VlQmxvY2sucGFyZW50RWxlbWVudC5jcmVhdGVEaXYoeyBjbHM6IFsndGltZXItY29udHJvbC1jb250YWluZXInXSB9KVxuXG5cdFx0XHRuZXcgVGltZXJXaWRnZXQodGhpcywgdGltZXJXaWRnZXQpXG5cdFx0XHRcdC5zZXRJZGVudGlmaWVyKGlkZW50aWZpZXIpXG5cdFx0XHRcdC5zZXRUeXBlKHR5cGVOYW1lKVxuXHRcdFx0XHQuc2hvd1RpbWVyQ29udHJvbCgpXG5cdFx0fVxuXHR9XG5cblx0b25UaW1lclNhdmUoZXZlbnQ6IFRpbWVyRXZlbnQpOiB2b2lkIHtcblx0XHRjb25zdCB7IHRpbWVyIH0gPSBldmVudFxuXG5cdFx0aWYgKHRpbWVyLmhhc1RhZygnamlyYScpICYmIHdpbmRvdy5qaXJhRXZlbnRCdXMpIHtcblx0XHRcdHdpbmRvdy5qaXJhRXZlbnRCdXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3RpbWVyc2F2ZScsIHtcblx0XHRcdFx0ZGV0YWlsOiB7XG5cdFx0XHRcdFx0aWQ6IHRpbWVyLmlkLFxuXHRcdFx0XHRcdGR1cmF0aW9uOiB0aW1lci5nZXRBcHByb3hpbWF0ZWREdXJhdGlvbih0aGlzLnNldHRpbmdzLmFwcHJveGltYXRpb24pLFxuXHRcdFx0XHRcdHN0YXJ0ZWRBdDogdGltZXIuc3RhcnRlZEF0LFxuXHRcdFx0XHRcdHRhZ3M6IHRpbWVyLnRhZ3Ncblx0XHRcdFx0fVxuXHRcdFx0fSkpXG5cdFx0XHQvLyB0aGlzLm9uVGltZXJTYXZlZCB3aWxsIGJlIGZpcmVkIGJ5IGppcmEgcGx1Z2luXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cblx0XHRpZiAodGltZXIuaGFzVGFnKCdyZWRtaW5lJykgJiYgd2luZG93LnJlZG1pbmVFdmVudEJ1cykge1xuXHRcdFx0d2luZG93LnJlZG1pbmVFdmVudEJ1cy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgndGltZXJzYXZlJywge1xuXHRcdFx0XHRkZXRhaWw6IHtcblx0XHRcdFx0XHRpZDogdGltZXIuaWQsXG5cdFx0XHRcdFx0ZHVyYXRpb246IHRpbWVyLmdldEFwcHJveGltYXRlZER1cmF0aW9uKHRoaXMuc2V0dGluZ3MuYXBwcm94aW1hdGlvbiksXG5cdFx0XHRcdFx0c3RhcnRlZEF0OiB0aW1lci5zdGFydGVkQXQsXG5cdFx0XHRcdFx0dGFnczogdGltZXIudGFnc1xuXHRcdFx0XHR9XG5cdFx0XHR9KSlcblx0XHRcdC8vIHRoaXMub25UaW1lclNhdmVkIHdpbGwgYmUgZmlyZWQgYnkgcmVkbWluZSBwbHVnaW5cblx0XHRcdHJldHVyblxuXHRcdH1cblx0XHRcblx0XHR0aGlzLmZpbGVTdG9yYWdlLnNhdmUodGltZXIpLnRoZW4oKCkgPT4ge1xuXHRcdFx0aWYgKHRpbWVyLmhhc1RhZygncG9tb2Rvcm8nKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBQb21vZG9ybyBzYXZlZCB0byBmaWxlICcke3RoaXMuc2V0dGluZ3Muc3RvcmFnZUZpbGV9J2ApXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBUaW1lciBzYXZlZCB0byBmaWxlICcke3RoaXMuc2V0dGluZ3Muc3RvcmFnZUZpbGV9J2ApXG5cdFx0XHR9XG5cdFx0XHR0aGlzLm9uVGltZXJTYXZlZCh7XG5cdFx0XHRcdGRldGFpbDoge1xuXHRcdFx0XHRcdGlkOiB0aW1lci5pZCxcblx0XHRcdFx0XHR0YWdzOiB0aW1lci50YWdzXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdG9uVGltZXJTYXZlZChldmVudDogT25UaW1lclNhdmVkRXZlbnQpOiB2b2lkIHtcblx0XHRpZiAoZXZlbnQuZGV0YWlsLnRhZ3MuaW5jbHVkZXMoJ3BvbW9kb3JvJykpIHtcblx0XHRcdHJldHVyblxuXHRcdH1cblx0XHR0aGlzLnRpbWVNYW5hZ2VyLmRlbGV0ZUJ5SWQoZXZlbnQuZGV0YWlsLmlkKVxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGxldCBkYXRhICA9IGF3YWl0IHRoaXMubG9hZERhdGEoKVxuXHRcdGRhdGEgPSBkYXRhIHx8IHtzZXR0aW5nczp7fX1cblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgZGF0YS5zZXR0aW5ncyB8fCB7fSlcblx0fVxuXG5cdGFzeW5jIGxvYWRUaW1lcnMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0bGV0IGRhdGEgID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpXG5cdFx0ZGF0YSA9IGRhdGEgfHwge3RpbWVyczpbXX1cblx0XHRpZiAoZGF0YS50aW1lcnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdFx0dGhpcy50aW1lTWFuYWdlci5yZXN0b3JlKGRhdGEudGltZXJzKVxuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEoe1xuXHRcdFx0c2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MsXG5cdFx0XHR0aW1lcnM6IHRoaXMudGltZU1hbmFnZXIuZHVtcCgpXG5cdFx0fSlcblx0XHR0aGlzLmluaXRTdGF0dXNCYXIoKVxuXHR9XG5cblx0YXN5bmMgc2F2ZVRpbWVycygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHtcblx0XHRcdHNldHRpbmdzOiB0aGlzLnNldHRpbmdzLFxuXHRcdFx0dGltZXJzOiB0aGlzLnRpbWVNYW5hZ2VyLmR1bXAoKVxuXHRcdH0pXG5cdH1cblxuXHRvbnVubG9hZCgpOiB2b2lkIHtcblx0XHRkZWxldGUgd2luZG93LnRpbWVUcmFja2VyRXZlbnRCdXNcblx0fVxufVxuIl0sIm5hbWVzIjpbImFkZEljb24iLCJQbHVnaW5TZXR0aW5nVGFiIiwiU2V0dGluZyIsIk1vZGFsIiwiVGV4dENvbXBvbmVudCIsIkJ1dHRvbkNvbXBvbmVudCIsIkl0ZW1WaWV3Iiwib3MiLCJGdXp6eVN1Z2dlc3RNb2RhbCIsIk5vdGljZSIsIlBsdWdpbiIsIkppcmFJc3N1ZVNldHRpbmdUYWIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdURBO0FBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0FBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0FBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUss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
